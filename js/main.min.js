const inceptionAudio=new Audio("sounds/windows-error.mp3");inceptionAudio.volume=.5,inceptionAudio.preload="auto";const PageLoader={gifs:["images/loaders/akuakua_a_far_away_total_solar_eclipse_in_a_sea_of_pure_black_cb4c7c01-ef1d-4139-b7a5-dc49cacefea2_1.gif","images/loaders/akuakua_space-related_nes_aesthetic_8_bit_pixel_images_for_we_023141ec-734b-4726-b355-caa6f1f96e0f_1.gif","images/loaders/akuakua_space-related_nes_aesthetic_8_bit_pixel_images_for_we_b62fe4d4-a1c4-440c-9f7b-252cb1c4d887_0.gif","images/loaders/akuakua_space-related_nes_graphic_reminiscent_8_bit_pixel_ima_6cda2543-228f-4ea4-842c-353a2b18a985_1.gif","images/loaders/akuakua_space-related_nes_graphic_reminiscent_8_bit_pixel_ima_95f256d7-d9da-4db1-b60e-6c7d95b316f8_1.gif","images/loaders/akuakua_space-related_nes_graphic_reminiscent_8_bit_pixel_ima_c0b67235-2101-4274-b854-9fa0f8f85d25_0.gif","images/loaders/akuakua_space-related_nes_graphic_reminiscent_8_bit_pixel_ima_ed5c0816-dfd1-47aa-b5eb-1e7805171470_2.gif"],getRandomGif(){return this.gifs[Math.floor(Math.random()*this.gifs.length)]},show(){const e=document.getElementById("page-loader"),t=document.getElementById("page-loader-gif"),o=document.getElementById("page-loader-bar");if(e&&t&&(t.src=this.getRandomGif(),e.classList.add("active"),o)){const e=o.clientWidth-12,t=9,a=Math.max(5,Math.floor(e/t)),s=1400,i=Math.floor(s/a);let n=0;o.textContent="";const r=setInterval(()=>{n++,o.textContent="▮".repeat(n),n>=a&&clearInterval(r)},i)}},hide(){const e=document.getElementById("page-loader");e&&e.classList.remove("active")},init(){document.addEventListener("click",e=>{const t=e.target.closest("a[href]");if(!t)return;const o=t.getAttribute("href");if(!o)return;if("#"===o||o.startsWith("#"))return;const a=o.endsWith(".html")&&!o.includes("index.html"),s=t.hasAttribute("data-project")||t.closest("[data-project]");(a||s)&&(e.preventDefault(),this.show(),setTimeout(()=>{window.location.href=o},2e3))})}},AppState={activeFilters:{status:["all"],area:[],tech:[],sort:"date-desc"},currentSection:"home",resetFilters(){this.activeFilters={status:["all"],area:[],tech:[],sort:"date-desc"}}},Navigation={init(){this.setupEventListeners(),this.handleInitialLoad(),this.setupBrowserNavigation()},setupEventListeners(){document.querySelectorAll("[data-section]").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const o=e.dataset.section;this.showSection(o)})}),document.addEventListener("click",e=>{const t=e.target.closest("[data-section]");if(t&&t.classList.contains("blog-card")){e.preventDefault();const o=t.dataset.section;this.showSection(o)}}),document.querySelector(".logo")?.addEventListener("click",()=>{this.showSection("home")}),document.getElementById("mobile-menu-btn")?.addEventListener("click",()=>{this.toggleMobileMenu()})},showSection(e){const t=document.getElementById("loader");document.body.classList.add("loading"),t?.classList.remove("hidden"),window.scrollTo({top:0,behavior:"auto"}),setTimeout(()=>{document.querySelectorAll(".section").forEach(e=>{e.classList.remove("active")}),"home"!==e&&(ProjectsPreview.hide(),window.removeEventListener("scroll",ProjectsPreview.handleScroll)),setTimeout(()=>{const o=document.getElementById(e);if(o){o.classList.add("active"),AppState.currentSection=e;try{if(localStorage.setItem("blot-last-section",e),"projects"===e){const e=URLManager.serialize();localStorage.setItem("blot-last-filters",e)}}catch(e){}}this.updateURL(e);const a=document.getElementById("mobile-filter-nav-btn");if(a&&("projects"===e?a.classList.add("show-on-projects"):a.classList.remove("show-on-projects")),"home"===e)setTimeout(()=>HeroAnimations.trigger(),100),window.addEventListener("scroll",ProjectsPreview.handleScroll);else if("projects"===e){const e=URLManager.parseFilters();JSON.stringify(e)!==JSON.stringify(AppState.activeFilters)&&(AppState.activeFilters=e,FilterSystem.applyFromState())}this.updateNavState(e),this.closeMobileMenu(),window.scrollTo({top:0,behavior:"smooth"}),setTimeout(()=>{t?.classList.add("hidden"),document.body.classList.remove("loading")},200)},100)},500)},updateURL(e){let t=window.location.pathname;if("projects"===e){const e=URLManager.serialize();e&&(t+=`?${e}`);try{localStorage.setItem("blot-last-filters",e)}catch(e){}}"home"!==e&&(t+=`#${e}`),window.history.pushState(null,null,t)},updateNavState(e){document.querySelectorAll(".nav-links a, .mobile-nav-links a").forEach(t=>{t.dataset.section===e?t.classList.add("active"):t.classList.remove("active")})},toggleMobileMenu(){const e=document.getElementById("mobile-menu-btn"),t=document.getElementById("mobile-nav");e?.classList.toggle("active"),t?.classList.toggle("active")},closeMobileMenu(){const e=document.getElementById("mobile-menu-btn"),t=document.getElementById("mobile-nav");e?.classList.remove("active"),t?.classList.remove("active")},handleInitialLoad(){const e=window.location.hash.substring(1),t=e&&document.getElementById(e)?e:"home";"projects"===t&&(AppState.activeFilters=URLManager.parseFilters()),setTimeout(()=>{document.getElementById("loader")?.classList.add("hidden"),document.body.classList.remove("loading"),document.querySelectorAll(".section").forEach(e=>{e.classList.remove("active")});const e=document.getElementById(t);if(e){e.classList.add("active"),this.updateNavState(t);const o=document.getElementById("mobile-filter-nav-btn");o&&("projects"===t?o.classList.add("show-on-projects"):o.classList.remove("show-on-projects")),"projects"===t&&setTimeout(()=>FilterSystem.applyFromState(),200),"home"===t&&(setTimeout(()=>HeroAnimations.trigger(),200),window.addEventListener("scroll",ProjectsPreview.handleScroll))}},500)},setupBrowserNavigation(){window.addEventListener("hashchange",()=>{const e=window.location.hash.substring(1)||"home";document.getElementById(e)&&!document.getElementById(e).classList.contains("active")&&this.showSectionFromURL(e)})},showSectionFromURL(e){document.querySelectorAll(".section").forEach(e=>{e.classList.remove("active")}),"home"!==e&&(ProjectsPreview.hide(),window.removeEventListener("scroll",ProjectsPreview.handleScroll));const t=document.getElementById(e);if(t&&setTimeout(()=>t.classList.add("active"),50),"projects"===e){const e=URLManager.parseFilters();AppState.activeFilters=e,setTimeout(()=>{document.getElementById("projects").classList.contains("active")&&FilterSystem.applyFromState()},100)}"home"===e&&(setTimeout(()=>HeroAnimations.trigger(),100),window.addEventListener("scroll",ProjectsPreview.handleScroll)),this.updateNavState(e),this.closeMobileMenu(),window.scrollTo({top:0,behavior:"smooth"})}},HeroAnimations={trigger(){},initRotatingTagline(){}},ProjectsPreview={populate(){const e=document.getElementById("projects-preview-grid"),t=document.getElementById("projects-grid");if(!e||!t)return;e.innerHTML="";const o=t.querySelectorAll(".project-card-link"),a=Math.min(6,o.length);for(let t=0;t<a;t++){const a=o[t],s=a.cloneNode(!0);"poetry-card"===a.id&&a.removeAttribute("id"),e.appendChild(s)}markAIProjects(),"function"==typeof appendSeriesToTitles&&appendSeriesToTitles(),"function"==typeof wrapTechTagsOnMobile&&setTimeout(()=>{wrapTechTagsOnMobile(),limitTagsOnMobile()},100)},show(){const e=document.querySelector(".projects-preview-section");e?.classList.add("visible")},hide(){const e=document.querySelector(".projects-preview-section");e?.classList.remove("visible")},handleScroll(){document.getElementById("home")?.classList.contains("active")&&window.scrollY>.3*window.innerHeight&&(ProjectsPreview.show(),window.removeEventListener("scroll",ProjectsPreview.handleScroll))}},FilterSystem={init(){this.generateDynamicFilters(),setTimeout(()=>{this.attachEventListeners(),this.initCollapsibleSections()},200)},initCollapsibleSections(){document.querySelectorAll(".filter-section-header").forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const o=e.closest(".collapsible-section").classList.toggle("collapsed");e.setAttribute("aria-expanded",!o)})})},generateDynamicFilters(){const e=document.querySelectorAll("#projects-grid .project-card"),t=new Map,o=new Map;e.forEach(e=>{const a=e.dataset.area;a&&o.set(a,(o.get(a)||0)+1);const s=e.dataset.tech;s&&s.split(",").map(e=>e.trim()).forEach(e=>{e&&t.set(e,(t.get(e)||0)+1)})}),this.buildAreaFilters(o),this.buildTechFilters(t)},buildAreaFilters(e){const t=document.getElementById("area-filter-options");t&&(t.innerHTML="",Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0])).forEach(([e,o])=>{const a=this.createFilterOption("area",e,e,o);t.appendChild(a)}))},buildTechFilters(e){const t=document.getElementById("tech-filter-options");t&&(t.innerHTML="",Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0])).forEach(([e,o])=>{const a=this.createFilterOption("tech",e,e,o);t.appendChild(a)}))},createFilterOption(e,t,o,a){const s=document.createElement("div");s.className="filter-option",s.dataset.filter=e,s.dataset.value=t;const i=document.createElement("div");i.className="filter-checkbox";const n=document.createElement("span");n.textContent=o;const r=document.createElement("span");return r.className="filter-count",r.textContent=a,s.appendChild(i),s.appendChild(n),s.appendChild(r),s},attachEventListeners(){setTimeout(()=>{document.querySelectorAll(".filter-option").forEach(e=>{const t=e.cloneNode(!0);e.parentNode.replaceChild(t,e),t.addEventListener("click",e=>{this.handleFilterClick(e)})})},100)},handleFilterClick(e){const t=e.currentTarget,o=t.dataset.filter,a=t.dataset.value,s=t.querySelector(".filter-checkbox");"area"===o?s.classList.contains("checked")?(s.classList.remove("checked"),AppState.activeFilters.area=AppState.activeFilters.area.filter(e=>e!==a)):(s.classList.add("checked"),AppState.activeFilters.area.push(a)):"tech"===o&&(s.classList.contains("checked")?(s.classList.remove("checked"),AppState.activeFilters.tech=AppState.activeFilters.tech.filter(e=>e!==a)):(s.classList.add("checked"),AppState.activeFilters.tech.push(a))),this.applyFilters()},applyFilters(){const e=document.querySelectorAll("#projects-grid .project-card-link");let t=0;this.sortProjects(AppState.activeFilters.sort);const o=document.getElementById("poetry-card"),a=o?.classList.contains("visible");e.forEach(e=>{const o=e.querySelector(".project-card")?.dataset.area,s=e.querySelector(".project-card")?.dataset.tech,i=0===AppState.activeFilters.area.length||AppState.activeFilters.area.includes(o),n=0===AppState.activeFilters.tech.length||AppState.activeFilters.tech.some(e=>s&&s.toLowerCase().includes(e.toLowerCase()));"poetry-card"!==e.id?i&&n?(e.classList.remove("hidden","fade-out"),t++):(e.classList.add("fade-out"),setTimeout(()=>e.classList.add("hidden"),300)):a&&i&&n?(e.classList.remove("hidden","fade-out"),t++):a&&(e.classList.add("fade-out"),setTimeout(()=>e.classList.add("hidden"),300))});const s=a?e.length:e.length-1;this.updateCounter(t,s),setTimeout(()=>{this.regenerateWithSelections()},350),document.getElementById("projects")?.classList.contains("active")&&Navigation.updateURL("projects")},applyFromState(){document.getElementById("sort-select").value=AppState.activeFilters.sort,document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.remove("checked")}),AppState.activeFilters.area.forEach(e=>{const t=document.querySelector(`[data-filter="area"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),AppState.activeFilters.tech.forEach(e=>{const t=document.querySelector(`[data-filter="tech"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),this.applyFilters()},clearAll(){document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.remove("checked")}),document.getElementById("sort-select").value="date-desc",AppState.resetFilters(),this.applyFilters()},sortProjects(e){const t=document.getElementById("projects-grid"),o=Array.from(t.children),a=e=>{return 100*(parseInt(e.dataset.year)||0)+("Present"===(t=e.dataset.month||"")?13:{January:1,February:2,March:3,April:4,May:5,June:6,July:7,August:8,September:9,October:10,November:11,December:12}[t]||0);var t};o.sort((t,o)=>{const s=t.querySelector(".project-card"),i=o.querySelector(".project-card");switch(e){case"date-desc":return a(i)-a(s);case"date-asc":return a(s)-a(i);case"name-asc":return s.dataset.name.localeCompare(i.dataset.name);case"name-desc":return i.dataset.name.localeCompare(s.dataset.name);default:return 0}}),o.forEach(e=>t.appendChild(e))},updateCounter(e,t){const o=document.getElementById("visible-count"),a=document.getElementById("total-count"),s=document.getElementById("visible-count-mobile"),i=document.getElementById("total-count-mobile"),n=document.getElementById("visible-count-desktop"),r=document.getElementById("total-count-desktop");o&&(o.textContent=e),a&&(a.textContent=t),s&&(s.textContent=e),i&&(i.textContent=t),n&&(n.textContent=e),r&&(r.textContent=t)},regenerateWithSelections(){const e={area:[...AppState.activeFilters.area],tech:[...AppState.activeFilters.tech]};this.generateDynamicFilters(),AppState.activeFilters.area=e.area,AppState.activeFilters.tech=e.tech,this.restoreSelections(),setTimeout(()=>{this.attachEventListeners()},100)},restoreSelections(){document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.remove("checked")}),AppState.activeFilters.area.forEach(e=>{const t=document.querySelector(`[data-filter="area"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),AppState.activeFilters.tech.forEach(e=>{const t=document.querySelector(`[data-filter="tech"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")})}},URLManager={serialize(){const e=new URLSearchParams;return AppState.activeFilters.area.length>0&&e.set("area",AppState.activeFilters.area.join(",")),AppState.activeFilters.tech.length>0&&e.set("tech",AppState.activeFilters.tech.join(",")),"date-desc"!==AppState.activeFilters.sort&&e.set("sort",AppState.activeFilters.sort),e.toString()},parseFilters(){const e=new URLSearchParams(window.location.search),t={status:["all"],area:[],tech:[],sort:"date-desc"};return e.has("area")&&(t.area=e.get("area").split(",")),e.has("tech")&&(t.tech=e.get("tech").split(",")),e.has("sort")&&(t.sort=e.get("sort")),t}};function handleSortChange(e){AppState.activeFilters.sort=e.value,FilterSystem.applyFilters()}function clearAllFilters(){FilterSystem.clearAll()}function showSection(e){Navigation.showSection(e)}function markAIProjects(){const e=["claude","chatgpt","grok","gemini"];document.querySelectorAll(".project-card").forEach(t=>{const o=(t.querySelector("h3")?.textContent.toLowerCase()||"")+" "+(t.querySelector("p")?.textContent.toLowerCase()||"")+" "+(t.dataset.tech?.toLowerCase()||"")+" "+(t.dataset.name?.toLowerCase()||"");e.some(e=>o.includes(e))&&(t.classList.add("ai-project"),console.log("AI project detected:",t.dataset.name))})}function showInceptionModal(){const e=document.getElementById("inception-modal");e&&(e.classList.add("active"),document.body.classList.add("no-scroll"),inceptionAudio.currentTime=0,inceptionAudio.play().catch(e=>{console.log("Audio playback failed:",e)}))}function closeInceptionModal(){const e=document.getElementById("inception-modal");e&&(e.classList.remove("active"),document.body.classList.remove("no-scroll"))}document.addEventListener("DOMContentLoaded",function(){document.body.classList.add("loading"),PageLoader.init(),Navigation.init(),HeroAnimations.initRotatingTagline(),FilterSystem.init(),ProjectsPreview.populate(),populateAreaBadges(),initializeBlog(),QuoteRotator.init(),markAIProjects();const e=()=>{const e=document.querySelectorAll("#projects-grid .project-card"),t=document.getElementById("poetry-card"),o=t?.classList.contains("visible"),a=o?e.length:e.length-1,s=Array.from(e).filter(e=>{const t=e.closest(".project-card-link");return!e.classList.contains("hidden")&&("poetry-card"!==t?.id||o)}).length;FilterSystem.updateCounter(s,a)};e(),document.addEventListener("keydown",e=>{if("Escape"===e.key){Navigation.closeMobileMenu();const e=document.getElementById("filter-sidebar"),t=document.getElementById("filter-overlay");e&&t&&(e.classList.remove("active"),t.classList.remove("active"),document.body.style.overflow="")}});const t=document.getElementById("filter-toggle-btn"),o=document.getElementById("mobile-filter-nav-btn"),a=document.getElementById("filter-close-btn"),s=document.getElementById("filter-sidebar"),i=document.getElementById("filter-overlay"),n=()=>{s.classList.toggle("active"),i.classList.toggle("active"),s.classList.contains("active")?document.body.style.overflow="hidden":document.body.style.overflow=""};t&&s&&i&&t.addEventListener("click",n),o&&s&&i&&o.addEventListener("click",n),s&&i&&(a&&a.addEventListener("click",()=>{s.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""}),i.addEventListener("click",()=>{s.classList.remove("active"),i.classList.remove("active"),document.body.style.overflow=""})),NightSky.init();const r=t=>{const o=document.getElementById("poetry-card");console.log("syncBackgroundAndPoetry called with showGrid:",t),console.log("Poetry card element:",o),o?(console.log("Poetry card classes before:",o.className),t?(o.classList.add("visible"),console.log("Poetry card shown (grid mode)")):(o.classList.remove("visible"),console.log("Poetry card hidden (night sky mode)")),console.log("Poetry card classes after:",o.className),console.log("Poetry card computed display:",window.getComputedStyle(o).display),e()):console.error("Poetry card element not found!")},c=document.getElementById("bg-toggle-btn");console.log("Toggle button element:",c),c?(console.log("Poetry toggle button found and event listener attached"),c.addEventListener("click",e=>{console.log("========== TOGGLE CLICKED =========="),console.log("Event:",e),console.log("NightSky.isActive BEFORE toggle:",NightSky.isActive),e.preventDefault(),e.stopPropagation(),NightSky.toggle(),console.log("NightSky.isActive AFTER toggle:",NightSky.isActive);const t=!NightSky.isActive;console.log("Should show poetry:",t),r(t),console.log("========== TOGGLE COMPLETE ==========")})):console.error("bg-toggle-btn not found!");const l=localStorage.getItem("backgroundMode"),d="grid"===l;console.log("========== PAGE LOAD STATE =========="),console.log("Saved background mode:",l),console.log("Show grid:",d),r(d),console.log("========== PAGE LOAD COMPLETE ==========")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&closeInceptionModal()}),document.getElementById("inception-modal")?.addEventListener("click",e=>{"inception-modal"===e.target.id&&closeInceptionModal()});const NightSky={canvas:null,ctx:null,stars:[],shootingStars:[],animationFrame:null,isActive:!1,resizeTimeout:null,init(){this.canvas=document.getElementById("night-sky-canvas"),this.canvas&&(this.ctx=this.canvas.getContext("2d"),this.resizeCanvas(),this.createStars(),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768||window.addEventListener("resize",()=>{clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(()=>this.resizeCanvas(),250)}),"grid"===localStorage.getItem("backgroundMode")?this.deactivate():this.activate())},resizeCanvas(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,this.isActive&&this.createStars()},createStars(){this.stars=[];const e=Math.floor(this.canvas.width*this.canvas.height/8e3);for(let t=0;t<e;t++)this.stars.push({x:Math.random()*this.canvas.width,y:Math.random()*this.canvas.height,radius:.8*Math.random()+.3,opacity:.4*Math.random()+.4,twinkleSpeed:.008*Math.random()+.002,twinkleDirection:Math.random()>.5?1:-1})},createShootingStar(){if(Math.random()<.002){const e=Math.random()<.5?0:3;let t,o;const a=Math.PI/4;switch(e){case 0:t=Math.random()*this.canvas.width,o=0;break;case 3:t=0,o=Math.random()*this.canvas.height}this.shootingStars.push({x:t,y:o,length:80*Math.random()+40,speed:8*Math.random()+10,angle:a,opacity:1,tail:[]})}},animate(){this.isActive&&(this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.stars.forEach(e=>{e.opacity+=e.twinkleSpeed*e.twinkleDirection,e.opacity>=1?(e.opacity=1,e.twinkleDirection=-1):e.opacity<=.3&&(e.opacity=.3,e.twinkleDirection=1),this.ctx.beginPath(),this.ctx.arc(e.x,e.y,e.radius,0,2*Math.PI),this.ctx.fillStyle=`rgba(255, 255, 255, ${e.opacity})`,this.ctx.fill(),e.radius>1&&(this.ctx.beginPath(),this.ctx.arc(e.x,e.y,2*e.radius,0,2*Math.PI),this.ctx.fillStyle=`rgba(255, 255, 255, ${.2*e.opacity})`,this.ctx.fill())}),this.createShootingStar(),this.shootingStars=this.shootingStars.filter(e=>{if(e.x+=Math.cos(e.angle)*e.speed,e.y+=Math.sin(e.angle)*e.speed,e.opacity-=.01,e.opacity<=0)return!1;const t=this.ctx.createLinearGradient(e.x,e.y,e.x-Math.cos(e.angle)*e.length,e.y-Math.sin(e.angle)*e.length);return t.addColorStop(0,`rgba(255, 255, 255, ${e.opacity})`),t.addColorStop(.5,`rgba(200, 220, 255, ${.6*e.opacity})`),t.addColorStop(1,"rgba(255, 255, 255, 0)"),this.ctx.beginPath(),this.ctx.moveTo(e.x,e.y),this.ctx.lineTo(e.x-Math.cos(e.angle)*e.length,e.y-Math.sin(e.angle)*e.length),this.ctx.strokeStyle=t,this.ctx.lineWidth=2,this.ctx.stroke(),!0}),this.animationFrame=requestAnimationFrame(()=>this.animate()))},activate(){this.isActive=!0;const e=document.getElementById("global-background");e?.classList.add("night-sky-mode"),localStorage.setItem("backgroundMode","night-sky"),this.animationFrame||this.animate()},deactivate(){this.isActive=!1;const e=document.getElementById("global-background");e?.classList.remove("night-sky-mode"),localStorage.setItem("backgroundMode","grid"),this.animationFrame&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null),this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)},toggle(){this.isActive?this.deactivate():this.activate()}};function populateAreaBadges(){const e=document.getElementById("area-badges-container");if(!e)return;const t=document.querySelectorAll("#projects-grid .project-card"),o=new Set;t.forEach(e=>{const t=e.dataset.area;t&&o.add(t)});const a=Array.from(o).sort();e.innerHTML="",a.forEach(t=>{const o=document.createElement("span");o.className="area-badge",o.textContent=t,e.appendChild(o)});const s=a.length;if(s>0){let t=4;for(let e=3;e<=5;e++)if(Math.ceil(s/e),(s%e||e)>=Math.ceil(e/2)){t=e;break}e.style.setProperty("--items-per-row",t)}}const QuoteRotator={quotes:[{text:"So remember to look up at the stars and not down at your feet. Try to make sense of what you see and hold on to that childlike wonder about what makes the universe exist.",author:"Stephen Hawking"},{text:"He ought to find it more profitable to play by the rules than to undermine the system.",author:"Satoshi Nakamoto"},{text:"If I have seen further, it is by standing on the shoulders of giants.",author:"Isaac Newton"},{text:"Not knowing when the dawn will come I open every door.",author:"Emily Dickinson"},{text:"If you want the rainbow, you got to put up with the rain.",author:"Dolly Parton"},{text:"We do not inherit the earth from our ancestors; we borrow it from our children.",author:"Proverb"},{text:"Understanding is love's other name.",author:"Thích Nhất Hạnh"}],currentIndex:0,autoRotateInterval:null,init(){document.getElementById("rotating-quote")&&(this.createIndicators(),this.showQuote(0),this.setupEventListeners(),this.startAutoRotate())},createIndicators(){const e=document.getElementById("quote-indicators");e&&(e.innerHTML="",this.quotes.forEach((t,o)=>{const a=document.createElement("div");a.className="quote-indicator",0===o&&a.classList.add("active"),a.addEventListener("click",()=>this.goToQuote(o)),e.appendChild(a)}))},setupEventListeners(){document.getElementById("quote-prev")?.addEventListener("click",()=>this.prevQuote()),document.getElementById("quote-next")?.addEventListener("click",()=>this.nextQuote())},showQuote(e){const t=document.querySelector(".rotating-quote-text"),o=document.querySelector(".rotating-quote-author");t&&o&&(t.classList.remove("active"),o.classList.remove("active"),setTimeout(()=>{t.textContent=this.quotes[e].text,o.textContent=this.quotes[e].author,t.classList.add("active"),o.classList.add("active"),document.querySelectorAll(".quote-indicator").forEach((t,o)=>{t.classList.toggle("active",o===e)}),this.currentIndex=e},300))},nextQuote(){const e=(this.currentIndex+1)%this.quotes.length;this.showQuote(e),this.resetAutoRotate()},prevQuote(){const e=(this.currentIndex-1+this.quotes.length)%this.quotes.length;this.showQuote(e),this.resetAutoRotate()},goToQuote(e){this.showQuote(e),this.resetAutoRotate()},startAutoRotate(){this.autoRotateInterval=setInterval(()=>{this.nextQuote()},8e3)},resetAutoRotate(){clearInterval(this.autoRotateInterval),this.startAutoRotate()}};function generateBlogPostsFromHTML(){const e=document.querySelectorAll(".post-section"),t=[];return e.forEach(e=>{const o=e.id,a=e.querySelector(".post-title"),s=e.querySelector(".post-excerpt"),i=e.querySelector(".post-date"),n=e.querySelector(".post-category"),r=e.querySelector(".post-featured-image img"),c=e.querySelectorAll(".post-tag"),l=e.querySelector(".post-content"),d=e.querySelector(".post-read-time");let h=0;if(l){const e=(l.textContent||l.innerText).trim().split(/\s+/).length;h=Math.ceil(e/200)}d&&h>0&&(d.textContent=`${h} min read`);const u=n?n.textContent.trim().toLowerCase():"";let m="thoughts";u.includes("case study")?m="case-study":u.includes("tutorial")&&(m="tutorial");let g="";r&&(g=r.getAttribute("src")||r.src),t.push({id:o,title:a?a.textContent.trim():"",excerpt:s?s.textContent.trim():"",date:parseDateFromText(i?i.textContent.trim():""),category:m,tags:Array.from(c).map(e=>e.textContent.trim()),image:g,section:o,readTime:h})}),t}function parseDateFromText(e){const t=new Date(e);return isNaN(t.getTime())?"":`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}-${String(t.getDate()).padStart(2,"0")}`}let blogPosts=[];const BlogState={currentFilter:"all",searchQuery:"",filteredPosts:[]};function initializeBlog(){blogPosts=generateBlogPostsFromHTML(),console.log("Generated blog posts:",blogPosts),BlogState.filteredPosts=[...blogPosts],setupBlogEventListeners(),renderBlogPosts(),updatePostCounter()}function setupBlogEventListeners(){document.querySelectorAll(".blog-filters .filter-btn").forEach(e=>{e.addEventListener("click",()=>handleBlogFilterClick(e))});const e=document.getElementById("blog-search");e&&e.addEventListener("input",e=>handleBlogSearch(e.target.value))}function handleBlogFilterClick(e){document.querySelectorAll(".blog-filters .filter-btn").forEach(e=>{e.classList.remove("active")}),e.classList.add("active"),BlogState.currentFilter=e.dataset.filter,applyBlogFilters()}function handleBlogSearch(e){BlogState.searchQuery=e.toLowerCase(),applyBlogFilters()}function applyBlogFilters(){BlogState.filteredPosts=blogPosts.filter(e=>{const t="all"===BlogState.currentFilter||e.category===BlogState.currentFilter,o=""===BlogState.searchQuery||e.title.toLowerCase().includes(BlogState.searchQuery)||e.excerpt.toLowerCase().includes(BlogState.searchQuery)||e.tags.some(e=>e.toLowerCase().includes(BlogState.searchQuery));return t&&o}),renderBlogPosts(),updatePostCounter()}function renderBlogPosts(){const e=document.getElementById("blog-grid"),t=document.getElementById("no-results");if(!e||!t)return;if(0===BlogState.filteredPosts.length)return e.innerHTML="",void(t.style.display="block");t.style.display="none";const o=[...BlogState.filteredPosts].sort((e,t)=>new Date(t.date)-new Date(e.date));e.innerHTML=o.map((e,t)=>createBlogCard(e,o.length-t)).join(""),adjustBlogCardTags()}function adjustBlogCardTags(){document.querySelectorAll(".blog-card-tags").forEach(e=>{const t=Array.from(e.querySelectorAll(".blog-tag:not(.blog-tag-more)")),o=parseInt(e.dataset.totalTags);if(0===t.length)return;const a=e.querySelector(".blog-tag-more");if(a&&a.remove(),t.forEach((e,t)=>{e.style.display=t<5?"":"none"}),o>5){const t=o-5,a=document.createElement("span");a.className="blog-tag blog-tag-more",a.textContent=`+${t} more`,e.appendChild(a)}})}function createBlogCard(e,t){const o=formatBlogDate(e.date),a=(getBlogCategoryLabel(e.category),e.readTime?`${e.readTime} min read`:"");return`\n        <a href="#" data-section="${e.section}" class="blog-card" data-post-id="${e.id}">\n            <div class="blog-card-image">\n                <img src="${e.image}" alt="${e.title}" loading="lazy">\n            </div>\n            <div class="blog-card-content">\n                <span class="blog-card-number">#${t}</span>\n                <h2 class="blog-card-title">${e.title}</h2>\n                <div class="blog-card-meta">\n                    <span class="blog-card-date">${o}</span>\n                    ${a?`<span class="blog-card-separator">·</span><span class="blog-card-read-time">${a}</span>`:""}\n                </div>\n                <p class="blog-card-excerpt">${e.excerpt}</p>\n                <div class="blog-card-tags" data-total-tags="${e.tags.length}">\n                    ${e.tags.map(e=>`<span class="blog-tag">${e}</span>`).join("")}\n                </div>\n                <span class="blog-card-read-more">\n                    Read more\n                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <line x1="5" y1="12" x2="19" y2="12"></line>\n                        <polyline points="12 5 19 12 12 19"></polyline>\n                    </svg>\n                </span>\n            </div>\n        </a>\n    `}function updatePostCounter(){const e=document.getElementById("visible-posts"),t=document.getElementById("total-posts");e&&t&&(e.textContent=BlogState.filteredPosts.length,t.textContent=blogPosts.length)}function formatBlogDate(e){return new Date(e+"T00:00:00Z").toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",timeZone:"UTC"})}function getBlogCategoryLabel(e){return{"case-study":"Case Study",tutorial:"Tutorial",thoughts:"Thoughts"}[e]||e}function wrapTechTagsOnMobile(){window.innerWidth>768||document.querySelectorAll(".project-tags").forEach(e=>{if(e.querySelector(".tech-tags-wrapper"))return;e.querySelector(".project-area-badge");const t=Array.from(e.querySelectorAll(".tag:not(.more-tag)"));if(0===t.length)return;const o=document.createElement("div");o.className="tech-tags-wrapper",t.forEach(e=>{o.appendChild(e)}),e.appendChild(o)})}function limitTagsOnMobile(){window.innerWidth>768||document.querySelectorAll(".tech-tags-wrapper").forEach(e=>{const t=Array.from(e.querySelectorAll(".tag:not(.more-tag)"));if(0===t.length)return;const o=e.querySelector(".more-tag");if(o&&o.remove(),e.scrollHeight>e.clientHeight){const o=e.getBoundingClientRect().bottom;let a=0;if(t.forEach(e=>{e.getBoundingClientRect().bottom>o+2&&a++}),a>0){const t=document.createElement("span");t.className="tag more-tag",t.textContent=`+${a} more`,e.appendChild(t)}}})}function appendSeriesToTitles(){document.querySelectorAll(".project-card").forEach(e=>{const t=e.getAttribute("data-series");if(t){const o=e.querySelector(".project-header h3");o&&!o.textContent.includes(`(${t})`)&&(o.textContent=`${o.textContent} (${t})`)}})}window.addEventListener("resize",()=>{wrapTechTagsOnMobile(),limitTagsOnMobile()}),window.addEventListener("load",()=>{wrapTechTagsOnMobile(),limitTagsOnMobile(),appendSeriesToTitles()});