class BlogLoader{constructor(){this.posts=[],this.postsConfig=[{id:"post-blot-world",file:"blog/posts/blot-world-case-study.md"}]}parseFrontmatter(t){const e=t.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/);if(!e)return{metadata:{},content:t};const o=e[1],s=e[2],n={},r=o.split("\n");let i=null,l=null;return r.forEach(t=>{const e=t.trim();if(!e)return;if(e.startsWith("-"))return void(l&&l.push(e.substring(1).trim()));const o=e.indexOf(":");if(o>-1){const t=e.substring(0,o).trim(),s=e.substring(o+1).trim().replace(/^["']|["']$/g,"");""===s?(i=t,l=[],n[t]=l):(n[t]=s,i=null,l=null)}}),{metadata:n,content:s}}markdownToHtml(t){let e=t;e=e.replace(/^### (.*$)/gim,"<h3>$1</h3>"),e=e.replace(/^## (.*$)/gim,"<h2>$1</h2>"),e=e.replace(/^# (.*$)/gim,"<h1>$1</h1>"),e=e.replace(/\*\*(.+?)\*\*/g,"<strong>$1</strong>"),e=e.replace(/\*(.+?)\*/g,"<em>$1</em>"),e=e.replace(/```(\w+)?\n([\s\S]*?)```/g,"<pre><code>$2</code></pre>"),e=e.replace(/`([^`]+)`/g,"<code>$1</code>"),e=e.replace(/^\- (.+)$/gim,"<li>$1</li>"),e=e.replace(/(<li>.*<\/li>)/s,"<ul>$1</ul>"),e=e.replace(/^\d+\. (.+)$/gim,"<li>$1</li>"),e=e.replace(/^---$/gim,"<hr>");const o=e.split("\n");let s=!1,n=!1,r=[];for(let t=0;t<o.length;t++){const e=o[t],i=e.trim();i.startsWith("<pre>")&&(n=!0),i.startsWith("</pre>")&&(n=!1),(i.startsWith("<ul>")||i.startsWith("<ol>"))&&(s=!0),(i.startsWith("</ul>")||i.startsWith("</ol>"))&&(s=!1),!i||i.startsWith("<h")||i.startsWith("<ul")||i.startsWith("<ol")||i.startsWith("<li")||i.startsWith("<hr")||i.startsWith("<pre")||i.startsWith("</")||s||n?r.push(e):r.push(`<p>${e}</p>`)}return e=r.join("\n"),e=e.replace(/<p>\s*<\/p>/g,""),e=e.replace(/<\/li>\n<li>/g,"</li><li>"),e}async loadPost(t){try{const e=await fetch(t.file);if(!e.ok)throw new Error(`Failed to load ${t.file}`);const o=await e.text(),{metadata:s,content:n}=this.parseFrontmatter(o),r=this.markdownToHtml(n);return{id:t.id,title:s.title||"Untitled",date:s.date||"",category:s.category||"Thoughts",excerpt:s.excerpt||"",image:s.image||"",tags:s.tags||[],content:r}}catch(e){return console.error(`Error loading post ${t.file}:`,e),null}}async loadAllPosts(){const t=this.postsConfig.map(t=>this.loadPost(t)),e=await Promise.all(t);return this.posts=e.filter(t=>null!==t),this.posts}renderPost(t,e){console.log(`BlogLoader: Looking for container with ID: ${e}`);const o=document.getElementById(e);if(!o)return void console.error(`BlogLoader: Section ${e} not found`);const s=o.querySelector(".post-container");if(!s)return void console.error(`BlogLoader: .post-container not found in section ${e}`);console.log(`BlogLoader: Found container, rendering post: ${t.title}`);const n=`\n            <article>\n                <a href="#" data-section="blog" class="back-to-blog">\n                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                        <path d="M19 12H5M12 19l-7-7 7-7"/>\n                    </svg>\n                    Back to Thoughts\n                </a>\n\n                <header class="post-header">\n                    <div class="post-meta">\n                        <span class="post-date">\n                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">\n                                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect>\n                                <line x1="16" y1="2" x2="16" y2="6"></line>\n                                <line x1="8" y1="2" x2="8" y2="6"></line>\n                                <line x1="3" y1="10" x2="21" y2="10"></line>\n                            </svg>\n                            ${t.date}\n                        </span>\n                        <span class="post-category">${t.category}</span>\n                        <span class="post-read-time"></span>\n                    </div>\n\n                    <h1 class="post-title">${t.title}</h1>\n\n                    <p class="post-excerpt">${t.excerpt}</p>\n\n                    <div class="post-tags">\n                        ${t.tags.map(t=>`<span class="post-tag">${t}</span>`).join("\n                        ")}\n                    </div>\n                </header>\n\n                <div class="post-featured-image">\n                    <img src="${t.image}" alt="${t.title}">\n                </div>\n\n                <div class="post-content">\n                    ${t.content}\n                </div>\n            </article>\n        `;s.innerHTML=n;const r=s.querySelector(".post-content"),i=s.querySelector(".post-read-time");if(r&&i){const t=(r.textContent||r.innerText).trim().split(/\s+/).length,e=Math.ceil(t/200);i.textContent=`${e} min read`}}async init(){return console.log("BlogLoader: Starting initialization..."),await this.loadAllPosts(),console.log("BlogLoader: Loaded posts:",this.posts),this.posts.forEach(t=>{console.log(`BlogLoader: Rendering post ${t.id}`),this.renderPost(t,t.id)}),console.log("BlogLoader: Initialization complete"),this.posts}}window.BlogLoader=BlogLoader;