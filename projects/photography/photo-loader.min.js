!function(){"use strict";const e=[{file:"68223264_Unknown.JPG",date:"2017-08-21"},{file:"IMG_1992_result (1).jpg",date:"2024-08-12"},{file:"IMG_2010_result (1).jpg",date:"2024-08-13"},{file:"image0.jpeg",date:"2024-12-10"},{file:"IMG_4037_result (1).jpg",date:"2025-01-14"},{file:"IMG_5567_result.jpg",date:"2025-03-10"},{file:"IMG_6346_result_1.jpg",date:"2025-04-04"},{file:"IMG_6582_result.jpg",date:"2025-04-09"},{file:"IMG_7624_result_1.jpg",date:"2025-05-29"},{file:"IMG_8446_result.jpg",date:"2025-06-17"},{file:"IMG_8419_result.jpg",date:"2025-06-17"},{file:"IMG_8332_result.jpg",date:"2025-06-17"},{file:"IMG_8612_result.jpg",date:"2025-06-18"},{file:"IMG_8606_result.jpg",date:"2025-06-18"},{file:"IMG_8513_result.jpg",date:"2025-06-18"},{file:"IMG_8493_result.jpg",date:"2025-06-18"},{file:"IMG_8464_result.jpg",date:"2025-06-18"},{file:"IMG_8818_result.jpg",date:"2025-06-19"},{file:"IMG_8739_result.jpg",date:"2025-06-19"},{file:"IMG_8727_result.jpg",date:"2025-06-19"},{file:"IMG_9017_result.jpg",date:"2025-06-20"},{file:"IMG_9007_result.jpg",date:"2025-06-20"},{file:"IMG_9810_result_1.jpg",date:"2025-08-03"},{file:"IMG_0236_result.jpg",date:"2025-09-08"},{file:"vlcsnap-2025-11-12-02h05m05s496.jpg",date:"2025-09-20"},{file:"IMG_0772_result.jpg",date:"2025-10-21"},{file:"IMG_0969_result.jpg",date:"2025-11-02"},{file:"IMG_0966_result.jpg",date:"2025-11-02"},{file:"IMG_0955_result.jpg",date:"2025-11-02"}],t="images/";let o=0,n=[];function a(e){const[t,o,n]=e.split("-").map(Number);return new Date(t,o-1,n)}const l={loading:document.getElementById("loading"),noPhotos:document.getElementById("no-photos"),galleryLayout:document.getElementById("gallery-layout"),photoDate:document.getElementById("photo-date"),photoLocation:document.getElementById("photo-location"),locationItem:document.getElementById("location-item"),photoFilename:document.getElementById("photo-filename"),photoCount:document.getElementById("photo-count"),mainPhoto:document.getElementById("main-photo"),timelineTrack:document.getElementById("timeline-track"),timelineScroll:document.getElementById("timeline-scroll"),photoDimensions:document.getElementById("photo-dimensions"),photoAspect:document.getElementById("photo-aspect"),photoCamera:document.getElementById("photo-camera"),photoSettings:document.getElementById("photo-settings"),photoFlash:document.getElementById("photo-flash"),photoColorSpace:document.getElementById("photo-color-space"),photoSoftware:document.getElementById("photo-software"),flashItem:document.getElementById("flash-item"),colorSpaceItem:document.getElementById("color-space-item"),softwareItem:document.getElementById("software-item"),exifSection:document.getElementById("exif-section"),hoverInfo:document.getElementById("hover-info"),zoomOverlay:document.getElementById("zoom-overlay"),zoomIn:document.getElementById("zoom-in"),zoomOut:document.getElementById("zoom-out"),zoomReset:document.getElementById("zoom-reset"),zoomLevel:document.getElementById("zoom-level")};function i(){console.log(`Building timeline with ${n.length} photos`);const e=new Map;n.forEach((t,o)=>{const n=a(t.date),l=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e.has(l)||e.set(l,[]),e.get(l).push({...t,globalIndex:o})});const t=a(n[0].date),o=a(n[n.length-1].date),i=[];let d=new Date(t.getFullYear(),t.getMonth(),1);const m=new Date(o.getFullYear(),o.getMonth(),1);for(;d<=m;){const t=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;i.push({key:t,year:d.getFullYear(),month:d.getMonth(),photos:e.get(t)||[]}),d.setMonth(d.getMonth()+1)}console.log(`Generated ${i.length} monthly ticks`);const u=Math.max(...i.map(e=>e.photos.length),0);console.log(`Max photos in a single month: ${u}`),l.timelineTrack.innerHTML="";let g=null;i.forEach(e=>{const{year:t,month:o,photos:a}=e,i=t!==g,d=document.createElement("div");if(d.className="tick-mark",d.dataset.monthKey=e.key,i&&(d.classList.add("year"),g=t),a.length>0){d.classList.add("has-photos");const e=document.createElement("div");e.className="tick-previews",a.forEach((t,o)=>{const a=document.createElement("div");a.className="tick-thumbnail",a.dataset.photoIndex=t.globalIndex,a.dataset.photoNumber=t.globalIndex+1,a.addEventListener("mouseenter",()=>{l.hoverInfo&&(l.hoverInfo.textContent=`Photo ${a.dataset.photoNumber} of ${n.length}`,l.hoverInfo.classList.add("visible"))}),a.addEventListener("mouseleave",()=>{l.hoverInfo&&l.hoverInfo.classList.remove("visible")}),a.addEventListener("click",e=>{e.stopPropagation(),clearTimeout(r),c=!0,h=Date.now(),s(t.globalIndex),r=setTimeout(()=>{c=!1},1e3)}),e.appendChild(a)}),d.appendChild(e)}else d.classList.add("empty");const m=document.createElement("div");m.className="tick-line",d.appendChild(m);const u=document.createElement("div");u.className="tick-label";const p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i?(u.textContent=t,u.dataset.year=t,u.dataset.month=p[o]):u.textContent=p[o],d.appendChild(u),l.timelineTrack.appendChild(d)}),console.log(`Built ${i.length} tick marks`),function(e){const t=document.querySelector(".timeline-container"),o=document.querySelector(".timeline-scroll"),n=document.querySelector(".timeline-track");if(!t)return;const a=50+6*e+0+8,l=Math.max(70,Math.min(300,a));t.style.height=`${l}px`,t.style.minHeight=`${l}px`,o&&(o.style.minHeight=`${l}px`),n&&(n.style.minHeight=`${l}px`),document.documentElement.style.setProperty("--timeline-height",`${l}px`),console.log(`Timeline height adjusted to ${l}px for ${e} max stacked boxes`)}(u)}function s(e,i=!1,s=!0){if(e<0||e>=n.length)return;o=e;const d=n[e],c=e+1,r=`${window.location.pathname}?photo=${c}`;window.history.pushState({photoIndex:e},"",r),w(),l.mainPhoto.classList.remove("visible"),setTimeout(()=>{l.mainPhoto.src=d.src||t+d.file;const o=d.width>d.height?"landscape":"portrait";l.mainPhoto.setAttribute("data-orientation",o);const i=a(d.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});l.photoDate.textContent=i,d.exif&&d.exif.latitude&&d.exif.longitude?(l.photoLocation.textContent="Loading location...",l.locationItem.style.display="block",async function(e,t){try{const o=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=10&addressdetails=1`,{headers:{"User-Agent":"Photography Gallery/1.0"}});if(!o.ok)throw new Error("Geocoding request failed");const n=(await o.json()).address||{},a=n.city||n.town||n.village||n.hamlet||n.county||n.state||"Unknown Location",l=n.country;return l?`${a}, ${l}`:a}catch(e){throw e}}(d.exif.latitude,d.exif.longitude).then(e=>{l.photoLocation.textContent=e}).catch(e=>{console.warn("Reverse geocoding failed:",e);const t=d.exif.latitude.toFixed(6),o=d.exif.longitude.toFixed(6),n=d.exif.latitude>=0?"N":"S",a=d.exif.longitude>=0?"E":"W";l.photoLocation.textContent=`${Math.abs(t)}° ${n}, ${Math.abs(o)}° ${a}`})):(l.photoLocation.textContent="—",l.locationItem.style.display="block"),l.photoFilename.textContent=d.file,l.photoCount.textContent=`Photo ${e+1} of ${n.length}`;const s=function(e,t){const o=(e,t)=>0===t?e:o(t,e%t),n=o(e,t),a=e/n,l=t/n,i=e/t;return Math.abs(i-16/9)<.01?"16:9":Math.abs(i-4/3)<.01?"4:3":Math.abs(i-1.5)<.01?"3:2":Math.abs(i-1)<.01?"1:1 (Square)":Math.abs(i-21/9)<.01?"21:9":`${a}:${l}`}(d.width,d.height);l.photoDimensions.textContent=`${d.width} × ${d.height}px`,l.photoAspect.textContent=s,l.exifSection.style.display="block";const c=d.exif?[d.exif.Make,d.exif.Model].filter(Boolean).join(" "):"";l.photoCamera.textContent=c||"—";const r=[];if(d.exif?.ISO&&r.push(`ISO ${d.exif.ISO}`),d.exif?.FNumber&&r.push(`f/${d.exif.FNumber}`),d.exif?.ExposureTime){const e=d.exif.ExposureTime<1?`1/${Math.round(1/d.exif.ExposureTime)}s`:`${d.exif.ExposureTime}s`;r.push(e)}if(d.exif?.FocalLength&&r.push(`${d.exif.FocalLength}mm`),l.photoSettings.textContent=r.length>0?r.join(" · "):"—",void 0!==d.exif?.Flash){const e=!!(1&d.exif.Flash);l.photoFlash.textContent=e?"Fired":"Not Fired"}else l.photoFlash.textContent="—";if(l.flashItem.style.display="block",void 0!==d.exif?.ColorSpace){const e={1:"sRGB",65535:"Uncalibrated",2:"Adobe RGB"};l.photoColorSpace.textContent=e[d.exif.ColorSpace]||d.exif.ColorSpace}else l.photoColorSpace.textContent="—";l.colorSpaceItem.style.display="block",l.photoSoftware.textContent=d.exif?.Software||"—",l.softwareItem.style.display="block",setTimeout(()=>{l.mainPhoto.classList.add("visible")},50)},200),document.querySelectorAll(".tick-thumbnail").forEach(t=>{t.dataset.photoIndex===String(e)?t.classList.add("active"):t.classList.remove("active")});const m=a(d.date),h=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`,u=m.getMonth(),g=m.getFullYear();let f=null;11===u?f=`${g+1}-01`:1===u&&(f=`${g}-01`),document.querySelectorAll(".tick-mark").forEach(e=>{const t=e.querySelector(".tick-label");e.dataset.monthKey===h?(e.classList.add("active"),t.dataset.year&&t.dataset.month&&(t.textContent=t.dataset.month)):(e.classList.remove("active"),t.dataset.year&&(e.dataset.monthKey===f?t.style.opacity="0":(t.style.opacity="",t.textContent=t.dataset.year)))}),i||function(e,t=!0){const o=n[e];if(!o)return;const i=a(o.date),s=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,d=document.querySelectorAll(".tick-mark");for(let e of d)if(e.dataset.monthKey===s){const o=l.timelineScroll,n=e.offsetLeft+e.offsetWidth/2;o.scrollTo({left:n,behavior:t?"smooth":"auto"});break}}(e,s),p()}let d,c=!1,r=null,m=0,h=0;function u(){const e=l.timelineScroll.getBoundingClientRect(),t=e.left+e.width/2,i=document.querySelectorAll(".tick-mark.has-photos");let d=null,c=1/0;if(i.forEach(e=>{const o=e.getBoundingClientRect(),n=o.left+o.width/2,a=Math.abs(n-t);a<c&&(c=a,d=e)}),d&&d.dataset.monthKey){const e=d.dataset.monthKey,t=n[o];if(t){const o=a(t.date),l=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(e!==l){const t=n.findIndex(t=>{const o=a(t.date);return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`===e});-1!==t&&s(t,!0)}}return d}return null}function g(e){if(0===n.length)return;let t;t="prev"===e?o>0?o-1:o:o<n.length-1?o+1:o,t!==o&&(clearTimeout(r),c=!0,h=Date.now(),s(t,!1,!1),r=setTimeout(()=>{c=!1},300))}function p(){const e=document.getElementById("nav-prev"),t=document.getElementById("nav-next");e&&t&&(0===o?e.classList.add("disabled"):e.classList.remove("disabled"),o===n.length-1?t.classList.add("disabled"):t.classList.remove("disabled"))}l.timelineScroll.addEventListener("scroll",()=>{if(c)return;const e=Date.now();e-h<2e3||(e-m>50&&(u(),m=e),clearTimeout(d),d=setTimeout(()=>{const e=u();if(e){const t=l.timelineScroll,o=t.getBoundingClientRect(),n=o.left+o.width/2,a=e.getBoundingClientRect(),i=a.left+a.width/2,s=t.scrollLeft+(i-n);t.scrollTo({left:s,behavior:"smooth"})}},150))});let f=1,y=1,x=4,I=!1,v=0,E=0,M=0,$=0;function L(){if(1===f&&0===M&&0===$)l.mainPhoto.style.transform="",l.mainPhoto.classList.remove("zoomable");else{const e=`translate(${M}px, ${$}px) scale(${f})`;l.mainPhoto.style.transform=e,f>1?l.mainPhoto.classList.add("zoomable"):l.mainPhoto.classList.remove("zoomable")}l.zoomLevel&&(l.zoomLevel.textContent=`${Math.round(100*f)}%`),l.zoomIn&&l.zoomOut&&l.zoomReset&&(f>=x?l.zoomIn.classList.add("disabled"):l.zoomIn.classList.remove("disabled"),f<=y?l.zoomOut.classList.add("disabled"):l.zoomOut.classList.remove("disabled"),1===f?l.zoomReset.classList.add("disabled"):l.zoomReset.classList.remove("disabled"))}function w(){f=1,M=0,$=0,L()}l.mainPhoto.addEventListener("wheel",e=>{if(e.ctrlKey||0!==e.deltaY){e.preventDefault();const t=f,o=Math.abs(e.deltaY)>50?.1:.05;f=e.deltaY<0?Math.min(f+o,x):Math.max(f-o,y),f!==t&&L()}},{passive:!1}),l.mainPhoto.addEventListener("mousedown",e=>{f>1&&(e.preventDefault(),I=!0,v=e.clientX-M,E=e.clientY-$)}),document.addEventListener("mousemove",e=>{if(I&&f>1){e.preventDefault();const t=e.clientX-v,o=e.clientY-E,n=l.mainPhoto.getBoundingClientRect(),a=l.mainPhoto.parentElement.getBoundingClientRect(),i=n.width*f,s=n.height*f,d=Math.max(0,(i-a.width)/2),c=Math.max(0,(s-a.height)/2);M=Math.max(-d,Math.min(d,t)),$=Math.max(-c,Math.min(c,o)),L()}}),document.addEventListener("mouseup",()=>{I=!1});let b=0,S=1;function _(){l.loading.style.display="none",l.noPhotos.style.display="block"}l.mainPhoto.addEventListener("touchstart",e=>{if(2===e.touches.length){e.preventDefault();const t=e.touches[0],o=e.touches[1];b=Math.hypot(o.clientX-t.clientX,o.clientY-t.clientY),S=f}},{passive:!1}),l.mainPhoto.addEventListener("touchmove",e=>{if(2===e.touches.length){e.preventDefault();const t=e.touches[0],o=e.touches[1],n=Math.hypot(o.clientX-t.clientX,o.clientY-t.clientY);if(b>0){const e=n/b;f=Math.min(Math.max(S*e,y),x),L()}}},{passive:!1}),l.mainPhoto.addEventListener("touchend",e=>{e.touches.length<2&&(b=0)}),l.zoomIn&&l.zoomIn.addEventListener("click",()=>{f<x&&(f=Math.min(f+.25,x),L())}),l.zoomOut&&l.zoomOut.addEventListener("click",()=>{f>y&&(f=Math.max(f-.25,y),1===f&&(M=0,$=0),L())}),l.zoomReset&&l.zoomReset.addEventListener("click",()=>{w()}),l.mainPhoto.addEventListener("dblclick",e=>{e.preventDefault(),f>1?w():(f=2,M=0,$=0,L())}),window.addEventListener("popstate",e=>{e.state&&void 0!==e.state.photoIndex&&(clearTimeout(r),c=!0,h=Date.now(),s(e.state.photoIndex,!1,!1),r=setTimeout(()=>{c=!1},300))}),document.addEventListener("keydown",e=>{if(!("Escape"===e.key&&f>1))return"r"===e.key||"R"===e.key?(console.log("Reloading gallery..."),void location.reload()):void(0!==n.length&&("ArrowLeft"===e.key?g("prev"):"ArrowRight"===e.key&&g("next")));w()}),window.photographyGallery={getOldestPhotoInfo:function(){if(0===n.length)return null;const e=n[0],o=new Date(e.date);return{month:o.toLocaleDateString("en-US",{month:"long"}),year:o.getFullYear(),image:e.src||t+e.file}},photoCount:e.length};let k=(new Date).getMonth();setInterval(()=>{const e=(new Date).getMonth();e!==k&&(console.log("New month detected, rebuilding timeline..."),k=e,n.length>0&&i())},6e4),async function(){0!==e.length?async function(){const o=e.length,a=[];l.loading.textContent=`Loading photos (0/${o})...`;for(let o=0;o<e.length;o++){const n=e[o],l=(async()=>{try{const e=Date.now(),a=`${t}${n.file}?v=${e}`;return new Promise(async(e,t)=>{const l=new Image;l.onload=async function(){console.log(`✓ Loaded: ${n.file} (${l.naturalWidth}x${l.naturalHeight})`);let t=null,i=n.date;try{"undefined"==typeof exifr?console.warn("  exifr library not loaded"):(t=await exifr.parse(a,{tiff:!0,exif:!0,gps:!0,interop:!1}),t?.DateTimeOriginal&&!n.date&&(i=t.DateTimeOriginal.toISOString().split("T")[0]),t?console.log(`  EXIF: ${t?.Make||"N/A"} ${t?.Model||""} | GPS: ${t?.latitude?"Yes":"No"}`):console.warn(`  No EXIF data found in ${n.file}`))}catch(e){console.warn(`  EXIF parse error for ${n.file}:`,e.message)}e({...n,index:o,img:l,src:a,width:l.naturalWidth,height:l.naturalHeight,date:i,exif:t})},l.onerror=function(){console.error(`✗ Failed to load: ${n.file}`),t(new Error(`Failed to load: ${n.file}`))},l.src=a})}catch(e){return console.error(`✗ Error processing ${n.file}:`,e),null}})();a.push(l)}(await Promise.allSettled(a)).forEach(e=>{"fulfilled"===e.status&&null!==e.value&&n.push(e.value)}),console.log(`Loaded ${n.length} of ${o} photos`),n.length>0?(l.loading.style.display="none",l.galleryLayout.style.display="flex",i(),setTimeout(()=>{c=!0,h=Date.now();const e=new URLSearchParams(window.location.search).get("photo");let t=n.length-1;if(e){const o=parseInt(e,10)-1;o>=0&&o<n.length&&(t=o)}s(t),setTimeout(()=>{c=!1},1e3)},100),function(){const e=document.getElementById("nav-prev"),t=document.getElementById("nav-next");e&&e.addEventListener("click",()=>g("prev")),t&&t.addEventListener("click",()=>g("next")),p()}()):_()}():_()}()}();