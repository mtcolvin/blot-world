!function(){"use strict";const e=[{file:"68223264_Unknown.JPG",date:"2017-08-21"},{file:"IMG_1992_result.jpg",date:"2024-08-12"},{file:"IMG_2010_result.jpg",date:"2024-08-13"},{file:"image0.jpeg",date:"2024-12-10"},{file:"IMG_4037_result.jpg",date:"2025-01-14"},{file:"IMG_5567_result.jpg",date:"2025-03-10"},{file:"IMG_6346_result_1.jpg",date:"2025-04-04"},{file:"IMG_6582_result.jpg",date:"2025-04-09"},{file:"IMG_7624_result_1.jpg",date:"2025-05-29"},{file:"IMG_8446_result.jpg",date:"2025-06-17"},{file:"IMG_8419_result.jpg",date:"2025-06-17"},{file:"IMG_8332_result.jpg",date:"2025-06-17"},{file:"IMG_8612_result.jpg",date:"2025-06-18"},{file:"IMG_8606_result.jpg",date:"2025-06-18"},{file:"IMG_8513_result.jpg",date:"2025-06-18"},{file:"IMG_8493_result.jpg",date:"2025-06-18"},{file:"IMG_8464_result.jpg",date:"2025-06-18"},{file:"IMG_8818_result.jpg",date:"2025-06-19"},{file:"IMG_8739_result.jpg",date:"2025-06-19"},{file:"IMG_8727_result.jpg",date:"2025-06-19"},{file:"IMG_9017_result.jpg",date:"2025-06-20"},{file:"IMG_9007_result.jpg",date:"2025-06-20"},{file:"IMG_9810_result_1.jpg",date:"2025-08-03"},{file:"IMG_0236_result.jpg",date:"2025-09-08"},{file:"vlcsnap-2025-11-12-02h05m05s496.jpg",date:"2025-09-20"},{file:"IMG_0772_result.jpg",date:"2025-10-21"},{file:"IMG_0969_result.jpg",date:"2025-11-02"},{file:"IMG_0966_result.jpg",date:"2025-11-02"},{file:"IMG_0955_result.jpg",date:"2025-11-02"},{file:"IMG_1264_result.jpg",date:"2025-11-09"},{file:"IMG_1238_result.jpg",date:"2025-11-09"},{file:"IMG_1443_result.jpg",date:"2025-11-13"},{file:"IMG_1463_result.jpg",date:"2025-11-16"},{file:"IMG_1507_result.jpg",date:"2025-11-24"},{file:"IMG_1515_result.jpg",date:"2025-11-25"},{file:"IMG_1574_result.jpg",date:"2025-11-27"},{file:"IMG_1659_result.jpg",date:"2025-11-28"},{file:"IMG_1649_result.jpg",date:"2025-11-28"},{file:"IMG_1648_result.jpg",date:"2025-11-28"}],t="images/";let o=0,n=[];function l(e){const[t,o,n]=e.split("-").map(Number);return new Date(t,o-1,n)}const a={loading:document.getElementById("loading"),noPhotos:document.getElementById("no-photos"),galleryLayout:document.getElementById("gallery-layout"),photoDate:document.getElementById("photo-date"),photoLocation:document.getElementById("photo-location"),locationItem:document.getElementById("location-item"),photoFilename:document.getElementById("photo-filename"),photoCount:document.getElementById("photo-count"),mainPhoto:document.getElementById("main-photo"),timelineTrack:document.getElementById("timeline-track"),timelineScroll:document.getElementById("timeline-scroll"),photoDimensions:document.getElementById("photo-dimensions"),photoAspect:document.getElementById("photo-aspect"),photoCamera:document.getElementById("photo-camera"),photoSettings:document.getElementById("photo-settings"),photoFlash:document.getElementById("photo-flash"),photoColorSpace:document.getElementById("photo-color-space"),photoSoftware:document.getElementById("photo-software"),flashItem:document.getElementById("flash-item"),colorSpaceItem:document.getElementById("color-space-item"),softwareItem:document.getElementById("software-item"),exifSection:document.getElementById("exif-section"),hoverInfo:document.getElementById("hover-info"),zoomOverlay:document.getElementById("zoom-overlay"),zoomIn:document.getElementById("zoom-in"),zoomOut:document.getElementById("zoom-out"),zoomReset:document.getElementById("zoom-reset"),zoomLevel:document.getElementById("zoom-level")};function i(){console.log(`Building timeline with ${n.length} photos`);const e=new Map;n.forEach((t,o)=>{const n=l(t.date),a=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e.has(a)||e.set(a,[]),e.get(a).push({...t,globalIndex:o})});const t=l(n[0].date),o=l(n[n.length-1].date),i=[];let d=new Date(t.getFullYear(),t.getMonth(),1);const m=new Date(o.getFullYear(),o.getMonth(),1);for(;d<=m;){const t=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`;i.push({key:t,year:d.getFullYear(),month:d.getMonth(),photos:e.get(t)||[]}),d.setMonth(d.getMonth()+1)}console.log(`Generated ${i.length} monthly ticks`);const u=Math.max(...i.map(e=>e.photos.length),0);console.log(`Max photos in a single month: ${u}`),a.timelineTrack.innerHTML="";let g=null;i.forEach(e=>{const{year:t,month:o,photos:l}=e,i=t!==g,d=document.createElement("div");if(d.className="tick-mark",d.dataset.monthKey=e.key,i&&(d.classList.add("year"),g=t),l.length>0){d.classList.add("has-photos");const e=document.createElement("div");e.className="tick-previews",l.forEach((t,o)=>{const l=document.createElement("div");l.className="tick-thumbnail",l.dataset.photoIndex=t.globalIndex,l.dataset.photoNumber=t.globalIndex+1,l.addEventListener("mouseenter",()=>{a.hoverInfo&&(a.hoverInfo.textContent=`Photo ${l.dataset.photoNumber} of ${n.length}`,a.hoverInfo.classList.add("visible"))}),l.addEventListener("mouseleave",()=>{a.hoverInfo&&a.hoverInfo.classList.remove("visible")}),l.addEventListener("click",e=>{e.stopPropagation(),clearTimeout(r),c=!0,h=Date.now(),s(t.globalIndex),r=setTimeout(()=>{c=!1},1e3)}),e.appendChild(l)}),d.appendChild(e)}else d.classList.add("empty");const m=document.createElement("div");m.className="tick-line",d.appendChild(m);const u=document.createElement("div");u.className="tick-label";const p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];i?(u.textContent=t,u.dataset.year=t,u.dataset.month=p[o]):u.textContent=p[o],d.appendChild(u),a.timelineTrack.appendChild(d)}),console.log(`Built ${i.length} tick marks`),function(e){const t=document.querySelector(".timeline-container"),o=document.querySelector(".timeline-scroll"),n=document.querySelector(".timeline-track");if(!t)return;const l=50+6*e+0+8,a=Math.max(70,Math.min(300,l));t.style.height=`${a}px`,t.style.minHeight=`${a}px`,o&&(o.style.minHeight=`${a}px`),n&&(n.style.minHeight=`${a}px`),document.documentElement.style.setProperty("--timeline-height",`${a}px`),console.log(`Timeline height adjusted to ${a}px for ${e} max stacked boxes`)}(u)}function s(e,i=!1,s=!0){if(e<0||e>=n.length)return;o=e;const d=n[e],c=e+1,r=`${window.location.pathname}?photo=${c}`;window.history.pushState({photoIndex:e},"",r),L(),a.mainPhoto.classList.remove("visible"),setTimeout(()=>{a.mainPhoto.src=d.src||t+d.file;const o=d.width>d.height?"landscape":"portrait";a.mainPhoto.setAttribute("data-orientation",o);const i=l(d.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});a.photoDate.textContent=i,d.exif&&d.exif.latitude&&d.exif.longitude?(a.photoLocation.textContent="Loading location...",a.locationItem.style.display="block",async function(e,t){try{const o=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=10&addressdetails=1`,{headers:{"User-Agent":"Photography Gallery/1.0"}});if(!o.ok)throw new Error("Geocoding request failed");const n=(await o.json()).address||{},l=n.city||n.town||n.village||n.hamlet||n.county||n.state||"Unknown Location",a=n.country;return a?`${l}, ${a}`:l}catch(e){throw e}}(d.exif.latitude,d.exif.longitude).then(e=>{a.photoLocation.textContent=e}).catch(e=>{console.warn("Reverse geocoding failed:",e);const t=d.exif.latitude.toFixed(6),o=d.exif.longitude.toFixed(6),n=d.exif.latitude>=0?"N":"S",l=d.exif.longitude>=0?"E":"W";a.photoLocation.textContent=`${Math.abs(t)}° ${n}, ${Math.abs(o)}° ${l}`})):(a.photoLocation.textContent="—",a.locationItem.style.display="block"),a.photoFilename.textContent=d.file,a.photoCount.textContent=`Photo ${e+1} of ${n.length}`;const s=function(e,t){const o=(e,t)=>0===t?e:o(t,e%t),n=o(e,t),l=e/n,a=t/n,i=e/t;return Math.abs(i-16/9)<.01?"16:9":Math.abs(i-4/3)<.01?"4:3":Math.abs(i-1.5)<.01?"3:2":Math.abs(i-1)<.01?"1:1 (Square)":Math.abs(i-21/9)<.01?"21:9":`${l}:${a}`}(d.width,d.height);a.photoDimensions.textContent=`${d.width} × ${d.height}px`,a.photoAspect.textContent=s,a.exifSection.style.display="block";const c=d.exif?[d.exif.Make,d.exif.Model].filter(Boolean).join(" "):"";a.photoCamera.textContent=c||"—";const r=[];if(d.exif?.ISO&&r.push(`ISO ${d.exif.ISO}`),d.exif?.FNumber&&r.push(`f/${d.exif.FNumber}`),d.exif?.ExposureTime){const e=d.exif.ExposureTime<1?`1/${Math.round(1/d.exif.ExposureTime)}s`:`${d.exif.ExposureTime}s`;r.push(e)}if(d.exif?.FocalLength&&r.push(`${d.exif.FocalLength}mm`),a.photoSettings.textContent=r.length>0?r.join(" · "):"—",void 0!==d.exif?.Flash){const e=!!(1&d.exif.Flash);a.photoFlash.textContent=e?"Fired":"Not Fired"}else a.photoFlash.textContent="—";if(a.flashItem.style.display="block",void 0!==d.exif?.ColorSpace){const e={1:"sRGB",65535:"Uncalibrated",2:"Adobe RGB"};a.photoColorSpace.textContent=e[d.exif.ColorSpace]||d.exif.ColorSpace}else a.photoColorSpace.textContent="—";a.colorSpaceItem.style.display="block",a.photoSoftware.textContent=d.exif?.Software||"—",a.softwareItem.style.display="block",setTimeout(()=>{a.mainPhoto.classList.add("visible")},50)},200),document.querySelectorAll(".tick-thumbnail").forEach(t=>{t.dataset.photoIndex===String(e)?t.classList.add("active"):t.classList.remove("active")});const m=l(d.date),h=`${m.getFullYear()}-${String(m.getMonth()+1).padStart(2,"0")}`,u=m.getMonth(),g=m.getFullYear();let f=null;11===u?f=`${g+1}-01`:1===u&&(f=`${g}-01`),document.querySelectorAll(".tick-mark").forEach(e=>{const t=e.querySelector(".tick-label");e.dataset.monthKey===h?(e.classList.add("active"),t.dataset.year&&t.dataset.month&&(t.textContent=t.dataset.month)):(e.classList.remove("active"),t.dataset.year&&(e.dataset.monthKey===f?t.style.opacity="0":(t.style.opacity="",t.textContent=t.dataset.year)))}),i||function(e,t=!0){const o=n[e];if(!o)return;const i=l(o.date),s=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,d=document.querySelectorAll(".tick-mark");for(let e of d)if(e.dataset.monthKey===s){const o=a.timelineScroll,n=e.offsetLeft+e.offsetWidth/2;o.scrollTo({left:n,behavior:t?"smooth":"auto"});break}}(e,s),p()}let d,c=!1,r=null,m=0,h=0;function u(){const e=a.timelineScroll.getBoundingClientRect(),t=e.left+e.width/2,i=document.querySelectorAll(".tick-mark.has-photos");let d=null,c=1/0;if(i.forEach(e=>{const o=e.getBoundingClientRect(),n=o.left+o.width/2,l=Math.abs(n-t);l<c&&(c=l,d=e)}),d&&d.dataset.monthKey){const e=d.dataset.monthKey,t=n[o];if(t){const o=l(t.date),a=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(e!==a){const t=n.findIndex(t=>{const o=l(t.date);return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`===e});-1!==t&&s(t,!0)}}return d}return null}function g(e){if(0===n.length)return;let t;t="prev"===e?o>0?o-1:o:o<n.length-1?o+1:o,t!==o&&(clearTimeout(r),c=!0,h=Date.now(),s(t,!1,!1),r=setTimeout(()=>{c=!1},300))}function p(){const e=document.getElementById("nav-prev"),t=document.getElementById("nav-next");e&&t&&(0===o?e.classList.add("disabled"):e.classList.remove("disabled"),o===n.length-1?t.classList.add("disabled"):t.classList.remove("disabled"))}a.timelineScroll.addEventListener("scroll",()=>{if(c)return;const e=Date.now();e-h<2e3||(e-m>50&&(u(),m=e),clearTimeout(d),d=setTimeout(()=>{const e=u();if(e){const t=a.timelineScroll,o=t.getBoundingClientRect(),n=o.left+o.width/2,l=e.getBoundingClientRect(),i=l.left+l.width/2,s=t.scrollLeft+(i-n);t.scrollTo({left:s,behavior:"smooth"})}},150))});let f=1,y=1,I=4,x=!1,v=0,M=0,E=0,_=0;function $(){if(1===f&&0===E&&0===_)a.mainPhoto.style.transform="",a.mainPhoto.classList.remove("zoomable");else{const e=`translate(${E}px, ${_}px) scale(${f})`;a.mainPhoto.style.transform=e,f>1?a.mainPhoto.classList.add("zoomable"):a.mainPhoto.classList.remove("zoomable")}a.zoomLevel&&(a.zoomLevel.textContent=`${Math.round(100*f)}%`),a.zoomIn&&a.zoomOut&&a.zoomReset&&(f>=I?a.zoomIn.classList.add("disabled"):a.zoomIn.classList.remove("disabled"),f<=y?a.zoomOut.classList.add("disabled"):a.zoomOut.classList.remove("disabled"),1===f?a.zoomReset.classList.add("disabled"):a.zoomReset.classList.remove("disabled"))}function L(){f=1,E=0,_=0,$()}a.mainPhoto.addEventListener("wheel",e=>{if(e.ctrlKey||0!==e.deltaY){e.preventDefault();const t=f,o=Math.abs(e.deltaY)>50?.1:.05;f=e.deltaY<0?Math.min(f+o,I):Math.max(f-o,y),f!==t&&$()}},{passive:!1}),a.mainPhoto.addEventListener("mousedown",e=>{f>1&&(e.preventDefault(),x=!0,v=e.clientX-E,M=e.clientY-_)}),document.addEventListener("mousemove",e=>{if(x&&f>1){e.preventDefault();const t=e.clientX-v,o=e.clientY-M,n=a.mainPhoto.getBoundingClientRect(),l=a.mainPhoto.parentElement.getBoundingClientRect(),i=n.width*f,s=n.height*f,d=Math.max(0,(i-l.width)/2),c=Math.max(0,(s-l.height)/2);E=Math.max(-d,Math.min(d,t)),_=Math.max(-c,Math.min(c,o)),$()}}),document.addEventListener("mouseup",()=>{x=!1});let w=0,b=1;function S(){a.loading.style.display="none",a.noPhotos.style.display="block"}a.mainPhoto.addEventListener("touchstart",e=>{if(2===e.touches.length){e.preventDefault();const t=e.touches[0],o=e.touches[1];w=Math.hypot(o.clientX-t.clientX,o.clientY-t.clientY),b=f}},{passive:!1}),a.mainPhoto.addEventListener("touchmove",e=>{if(2===e.touches.length){e.preventDefault();const t=e.touches[0],o=e.touches[1],n=Math.hypot(o.clientX-t.clientX,o.clientY-t.clientY);if(w>0){const e=n/w;f=Math.min(Math.max(b*e,y),I),$()}}},{passive:!1}),a.mainPhoto.addEventListener("touchend",e=>{e.touches.length<2&&(w=0)}),a.zoomIn&&a.zoomIn.addEventListener("click",()=>{f<I&&(f=Math.min(f+.25,I),$())}),a.zoomOut&&a.zoomOut.addEventListener("click",()=>{f>y&&(f=Math.max(f-.25,y),1===f&&(E=0,_=0),$())}),a.zoomReset&&a.zoomReset.addEventListener("click",()=>{L()}),a.mainPhoto.addEventListener("dblclick",e=>{e.preventDefault(),f>1?L():(f=2,E=0,_=0,$())}),window.addEventListener("popstate",e=>{e.state&&void 0!==e.state.photoIndex&&(clearTimeout(r),c=!0,h=Date.now(),s(e.state.photoIndex,!1,!1),r=setTimeout(()=>{c=!1},300))}),document.addEventListener("keydown",e=>{if(!("Escape"===e.key&&f>1))return"r"===e.key||"R"===e.key?(console.log("Reloading gallery..."),void location.reload()):void(0!==n.length&&("ArrowLeft"===e.key?g("prev"):"ArrowRight"===e.key&&g("next")));L()}),window.photographyGallery={getOldestPhotoInfo:function(){if(0===n.length)return null;const e=n[0],o=new Date(e.date);return{month:o.toLocaleDateString("en-US",{month:"long"}),year:o.getFullYear(),image:e.src||t+e.file}},photoCount:e.length};let k=(new Date).getMonth();setInterval(()=>{const e=(new Date).getMonth();e!==k&&(console.log("New month detected, rebuilding timeline..."),k=e,n.length>0&&i())},6e4),async function(){0!==e.length?async function(){const o=e.length,l=[];a.loading.textContent=`Loading photos (0/${o})...`;for(let o=0;o<e.length;o++){const n=e[o],a=(async()=>{try{const e=Date.now(),l=`${t}${n.file}?v=${e}`;return new Promise(async(e,t)=>{const a=new Image;a.onload=async function(){console.log(`✓ Loaded: ${n.file} (${a.naturalWidth}x${a.naturalHeight})`);let t=null,i=n.date;try{"undefined"==typeof exifr?console.warn("  exifr library not loaded"):(t=await exifr.parse(l,{tiff:!0,exif:!0,gps:!0,interop:!1}),t?.DateTimeOriginal&&!n.date&&(i=t.DateTimeOriginal.toISOString().split("T")[0]),t?console.log(`  EXIF: ${t?.Make||"N/A"} ${t?.Model||""} | GPS: ${t?.latitude?"Yes":"No"}`):console.warn(`  No EXIF data found in ${n.file}`))}catch(e){console.warn(`  EXIF parse error for ${n.file}:`,e.message)}e({...n,index:o,img:a,src:l,width:a.naturalWidth,height:a.naturalHeight,date:i,exif:t})},a.onerror=function(){console.error(`✗ Failed to load: ${n.file}`),t(new Error(`Failed to load: ${n.file}`))},a.src=l})}catch(e){return console.error(`✗ Error processing ${n.file}:`,e),null}})();l.push(a)}(await Promise.allSettled(l)).forEach(e=>{"fulfilled"===e.status&&null!==e.value&&n.push(e.value)}),console.log(`Loaded ${n.length} of ${o} photos`),n.length>0?(a.loading.style.display="none",a.galleryLayout.style.display="flex",i(),setTimeout(()=>{c=!0,h=Date.now();const e=new URLSearchParams(window.location.search).get("photo");let t=n.length-1;if(e){const o=parseInt(e,10)-1;o>=0&&o<n.length&&(t=o)}s(t),setTimeout(()=>{c=!1},1e3)},100),function(){const e=document.getElementById("nav-prev"),t=document.getElementById("nav-next");e&&e.addEventListener("click",()=>g("prev")),t&&t.addEventListener("click",()=>g("next")),p()}()):S()}():S()}()}();