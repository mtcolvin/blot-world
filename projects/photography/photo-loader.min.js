!function(){"use strict";const e=[{file:"68223264_Unknown.JPG",date:"2017-08-21"},{file:"IMG_1325_result.jpg",date:"2024-06-22"},{file:"IMG_1352_result.jpg",date:"2024-06-25"},{file:"IMG_1395_result.jpg",date:"2024-06-28"},{file:"IMG_1992_result_1.jpg",date:"2024-08-12"},{file:"IMG_2010_result_1.jpg",date:"2024-08-13"},{file:"image0.jpeg",date:"2024-12-10"},{file:"IMG_4037_result_1.jpg",date:"2025-01-14"},{file:"IMG_5567_result.jpg",date:"2025-03-10"},{file:"IMG_6346_result_1.jpg",date:"2025-04-04"},{file:"IMG_6582_result.jpg",date:"2025-04-09"},{file:"IMG_7624_result_1.jpg",date:"2025-05-29"},{file:"IMG_8446_result.jpg",date:"2025-06-17"},{file:"IMG_8419_result.jpg",date:"2025-06-17"},{file:"IMG_8332_result.jpg",date:"2025-06-17"},{file:"IMG_8612_result.jpg",date:"2025-06-18"},{file:"IMG_8606_result.jpg",date:"2025-06-18"},{file:"IMG_8513_result.jpg",date:"2025-06-18"},{file:"IMG_8493_result.jpg",date:"2025-06-18"},{file:"IMG_8464_result.jpg",date:"2025-06-18"},{file:"IMG_8818_result.jpg",date:"2025-06-19"},{file:"IMG_8739_result.jpg",date:"2025-06-19"},{file:"IMG_8727_result.jpg",date:"2025-06-19"},{file:"IMG_9017_result.jpg",date:"2025-06-20"},{file:"IMG_9007_result.jpg",date:"2025-06-20"},{file:"IMG_9810_result_1.jpg",date:"2025-08-03"},{file:"IMG_0236_result.jpg",date:"2025-09-08"},{file:"vlcsnap-2025-11-12-02h05m05s496.jpg",date:"2025-09-20"},{file:"IMG_0772_result.jpg",date:"2025-10-21"},{file:"IMG_0969_result.jpg",date:"2025-11-02"},{file:"IMG_0966_result.jpg",date:"2025-11-02"},{file:"IMG_0955_result.jpg",date:"2025-11-02"},{file:"IMG_1264_result.jpg",date:"2025-11-09"},{file:"IMG_1238_result.jpg",date:"2025-11-09"},{file:"IMG_1443_result_1.jpg",date:"2025-11-13"},{file:"IMG_1463_result.jpg",date:"2025-11-16"},{file:"IMG_1507_result.jpg",date:"2025-11-24"},{file:"IMG_1574_result.jpg",date:"2025-11-27"},{file:"IMG_1659_result.jpg",date:"2025-11-28"},{file:"IMG_1649_result.jpg",date:"2025-11-28"},{file:"IMG_1648_result.jpg",date:"2025-11-28"}],t="images/";let o=0,n=[];const i=window.matchMedia("(max-width: 768px)").matches;let l,a="grid",s=!1,r=null,c=0,d=0;function m(e){const[t,o,n]=e.split("-").map(Number);return new Date(t,o-1,n)}const u={loading:document.getElementById("loading"),noPhotos:document.getElementById("no-photos"),galleryLayout:document.getElementById("gallery-layout"),photoDate:document.getElementById("photo-date"),photoLocation:document.getElementById("photo-location"),locationItem:document.getElementById("location-item"),photoFilename:document.getElementById("photo-filename"),photoCount:document.getElementById("photo-count"),mainPhoto:document.getElementById("main-photo"),timelineTrack:document.getElementById("timeline-track"),timelineScroll:document.getElementById("timeline-scroll"),photoDimensions:document.getElementById("photo-dimensions"),photoAspect:document.getElementById("photo-aspect"),photoCamera:document.getElementById("photo-camera"),photoSettings:document.getElementById("photo-settings"),photoFlash:document.getElementById("photo-flash"),photoColorSpace:document.getElementById("photo-color-space"),photoSoftware:document.getElementById("photo-software"),flashItem:document.getElementById("flash-item"),colorSpaceItem:document.getElementById("color-space-item"),softwareItem:document.getElementById("software-item"),exifSection:document.getElementById("exif-section"),hoverInfo:document.getElementById("hover-info"),zoomOverlay:document.getElementById("zoom-overlay"),zoomIn:document.getElementById("zoom-in"),zoomOut:document.getElementById("zoom-out"),zoomReset:document.getElementById("zoom-reset"),zoomLevel:document.getElementById("zoom-level"),mobileGridView:document.getElementById("mobile-grid-view"),mobileGrid:document.getElementById("mobile-grid"),mobileInfoBtn:document.getElementById("mobile-info-btn"),mobileCloseBtn:document.getElementById("mobile-close-btn")};function h(){console.log(`Building timeline with ${n.length} photos`);const e=new Map;n.forEach((t,o)=>{const n=m(t.date),i=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;e.has(i)||e.set(i,[]),e.get(i).push({...t,globalIndex:o})});const t=m(n[0].date),o=m(n[n.length-1].date),i=[];let a=new Date(t.getFullYear(),t.getMonth(),1);const c=new Date(o.getFullYear(),o.getMonth(),1);for(;a<=c;){const t=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;i.push({key:t,year:a.getFullYear(),month:a.getMonth(),photos:e.get(t)||[]}),a.setMonth(a.getMonth()+1)}console.log(`Generated ${i.length} monthly ticks`);const h=Math.max(...i.map(e=>e.photos.length),0);console.log(`Max photos in a single month: ${h}`),u.timelineTrack.innerHTML="";let g=null;i.forEach(e=>{const{year:t,month:o,photos:i}=e,a=t!==g,c=document.createElement("div");if(c.className="tick-mark",c.dataset.monthKey=e.key,a&&(c.classList.add("year"),g=t),i.length>0){c.classList.add("has-photos");const e=document.createElement("div");e.className="tick-previews",i.forEach((t,o)=>{const i=document.createElement("div");i.className="tick-thumbnail",i.dataset.photoIndex=t.globalIndex,i.dataset.photoNumber=t.globalIndex+1,i.addEventListener("mouseenter",()=>{u.hoverInfo&&(u.hoverInfo.textContent=`Photo ${i.dataset.photoNumber} of ${n.length}`,u.hoverInfo.classList.add("visible"))}),i.addEventListener("mouseleave",()=>{u.hoverInfo&&u.hoverInfo.classList.remove("visible")}),i.addEventListener("click",e=>{e.stopPropagation(),clearTimeout(l),clearTimeout(r),s=!0,d=Date.now(),b(t.globalIndex,!1,!1),r=setTimeout(()=>{s=!1},500)}),e.appendChild(i)}),c.appendChild(e)}else c.classList.add("empty");const m=document.createElement("div");m.className="tick-line",c.appendChild(m);const h=document.createElement("div");h.className="tick-label";const p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a?(h.textContent=t,h.dataset.year=t,h.dataset.month=p[o]):h.textContent=p[o],c.appendChild(h),u.timelineTrack.appendChild(c)}),console.log(`Built ${i.length} tick marks`),function(e){const t=document.querySelector(".timeline-container"),o=document.querySelector(".timeline-scroll"),n=document.querySelector(".timeline-track");if(!t)return;const i=50+6*e+0+8,l=Math.max(70,Math.min(300,i));t.style.height=`${l}px`,t.style.minHeight=`${l}px`,o&&(o.style.minHeight=`${l}px`),n&&(n.style.minHeight=`${l}px`),document.documentElement.style.setProperty("--timeline-height",`${l}px`),console.log(`Timeline height adjusted to ${l}px for ${e} max stacked boxes`)}(h)}let g=null;function p(e){a="photo",u.mobileGridView&&u.mobileGridView.classList.remove("active"),u.galleryLayout&&u.galleryLayout.classList.add("photo-mode"),clearTimeout(l),s=!0,d=Date.now(),b(e),setTimeout(()=>{s=!1},1e3)}function y(){a="grid",u.galleryLayout&&u.galleryLayout.classList.remove("photo-mode"),u.mobileGridView&&(u.mobileGridView.style.opacity="",u.mobileGridView.style.transition="",u.mobileGridView.classList.add("active")),v();const e=window.location.pathname;window.history.pushState({},"",e)}function f(){const e=document.querySelector(".photo-metadata"),t=document.querySelector(".gallery-layout");e&&(e.classList.toggle("mobile-visible"),t&&t.classList.toggle("info-visible"))}function v(){const e=document.querySelector(".photo-metadata"),t=document.querySelector(".gallery-layout");e&&(t&&t.classList.remove("info-visible"),e.classList.remove("mobile-visible"))}function b(e,l=!1,a=!0){if(e<0||e>=n.length)return;o=e;const s=n[e],r=e+1,c=`${window.location.pathname}?photo=${r}`;window.history.pushState({photoIndex:e},"",c),C(),u.mainPhoto.classList.remove("visible"),setTimeout(()=>{u.mainPhoto.src=s.src||t+s.file;const o=s.width>s.height?"landscape":"portrait";u.mainPhoto.setAttribute("data-orientation",o);const i=m(s.date).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"});u.photoDate.textContent=i,s.exif&&s.exif.latitude&&s.exif.longitude?(u.photoLocation.textContent="Loading location...",u.locationItem.style.display="block",async function(e,t){try{const o=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&zoom=10&addressdetails=1`,{headers:{"User-Agent":"Photography Gallery/1.0"}});if(!o.ok)throw new Error("Geocoding request failed");const n=(await o.json()).address||{},i=n.city||n.town||n.village||n.hamlet||n.county||n.state||"Unknown Location",l=n.country;return l?`${i}, ${l}`:i}catch(e){throw e}}(s.exif.latitude,s.exif.longitude).then(e=>{u.photoLocation.textContent=e}).catch(e=>{console.warn("Reverse geocoding failed:",e);const t=s.exif.latitude.toFixed(6),o=s.exif.longitude.toFixed(6),n=s.exif.latitude>=0?"N":"S",i=s.exif.longitude>=0?"E":"W";u.photoLocation.textContent=`${Math.abs(t)}° ${n}, ${Math.abs(o)}° ${i}`})):(u.photoLocation.textContent="—",u.locationItem.style.display="block"),u.photoFilename.textContent=s.file,u.photoCount.textContent=`Photo ${e+1} of ${n.length}`;const l=function(e,t){const o=(e,t)=>0===t?e:o(t,e%t),n=o(e,t),i=e/n,l=t/n,a=e/t;return Math.abs(a-16/9)<.01?"16:9":Math.abs(a-4/3)<.01?"4:3":Math.abs(a-1.5)<.01?"3:2":Math.abs(a-1)<.01?"1:1 (Square)":Math.abs(a-21/9)<.01?"21:9":`${i}:${l}`}(s.width,s.height);u.photoDimensions.textContent=`${s.width} × ${s.height}px`,u.photoAspect.textContent=l,u.exifSection.style.display="block";const a=s.exif?[s.exif.Make,s.exif.Model].filter(Boolean).join(" "):"";u.photoCamera.textContent=a||"—";const r=[];if(s.exif?.ISO&&r.push(`ISO ${s.exif.ISO}`),s.exif?.FNumber&&r.push(`f/${s.exif.FNumber}`),s.exif?.ExposureTime){const e=s.exif.ExposureTime<1?`1/${Math.round(1/s.exif.ExposureTime)}s`:`${s.exif.ExposureTime}s`;r.push(e)}if(s.exif?.FocalLength&&r.push(`${s.exif.FocalLength}mm`),u.photoSettings.textContent=r.length>0?r.join(" · "):"—",void 0!==s.exif?.Flash){const e=!!(1&s.exif.Flash);u.photoFlash.textContent=e?"Fired":"Not Fired"}else u.photoFlash.textContent="—";if(u.flashItem.style.display="block",void 0!==s.exif?.ColorSpace){const e={1:"sRGB",65535:"Uncalibrated",2:"Adobe RGB"};u.photoColorSpace.textContent=e[s.exif.ColorSpace]||s.exif.ColorSpace}else u.photoColorSpace.textContent="—";u.colorSpaceItem.style.display="block",u.photoSoftware.textContent=s.exif?.Software||"—",u.softwareItem.style.display="block",setTimeout(()=>{u.mainPhoto.classList.add("visible")},50)},200),document.querySelectorAll(".tick-thumbnail").forEach(t=>{t.dataset.photoIndex===String(e)?t.classList.add("active"):t.classList.remove("active")});const d=m(s.date),h=`${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,"0")}`,g=d.getMonth(),p=d.getFullYear();let y=null;11===g?y=`${p+1}-01`:1===g&&(y=`${p}-01`),document.querySelectorAll(".tick-mark").forEach(e=>{const t=e.querySelector(".tick-label");e.dataset.monthKey===h?(e.classList.add("active"),t.dataset.year&&t.dataset.month&&(t.textContent=t.dataset.month)):(e.classList.remove("active"),t.dataset.year&&(e.dataset.monthKey===y?t.style.opacity="0":(t.style.opacity="",t.textContent=t.dataset.year)))}),l||function(e,t=!0){const o=n[e];if(!o)return;const i=m(o.date),l=`${i.getFullYear()}-${String(i.getMonth()+1).padStart(2,"0")}`,a=document.querySelectorAll(".tick-mark");for(let e of a)if(e.dataset.monthKey===l){const o=u.timelineScroll,n=e.offsetLeft+e.offsetWidth/2;o.scrollTo({left:n,behavior:t?"smooth":"auto"});break}}(e,a),M(),i&&function(){const e=document.getElementById("mobile-timeline-indicator"),t=document.getElementById("mobile-timeline-current");if(!e)return;const i=n[o];if(!i)return;const l=m(i.date),a=o/(n.length-1||1)*100;e.style.left=`${a}%`,t&&(t.textContent=`${["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][l.getMonth()]} ${l.getFullYear()} · Photo ${o+1} of ${n.length}`)}()}function x(){const e=u.timelineScroll.getBoundingClientRect(),t=e.left+e.width/2,i=document.querySelectorAll(".tick-mark.has-photos");let l=null,a=1/0;if(i.forEach(e=>{const o=e.getBoundingClientRect(),n=o.left+o.width/2,i=Math.abs(n-t);i<a&&(a=i,l=e)}),l&&l.dataset.monthKey){const e=l.dataset.monthKey,t=n[o];if(t){const o=m(t.date),i=`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`;if(e!==i){const t=n.findIndex(t=>{const o=m(t.date);return`${o.getFullYear()}-${String(o.getMonth()+1).padStart(2,"0")}`===e});-1!==t&&b(t,!0)}}return l}return null}function I(e){if(0===n.length)return;let t;t="prev"===e?o>0?o-1:o:o<n.length-1?o+1:o,t!==o&&(clearTimeout(l),clearTimeout(r),s=!0,d=Date.now(),b(t,!1,!1),r=setTimeout(()=>{s=!1},300))}function M(){const e=document.getElementById("nav-prev"),t=document.getElementById("nav-next");e&&t&&(0===o?e.classList.add("disabled"):e.classList.remove("disabled"),o===n.length-1?t.classList.add("disabled"):t.classList.remove("disabled"))}u.timelineScroll.addEventListener("scroll",()=>{if(s)return;const e=Date.now();e-d<2e3||(e-c>50&&(x(),c=e),clearTimeout(l),l=setTimeout(()=>{const e=x();if(e){const t=u.timelineScroll,o=t.getBoundingClientRect(),n=o.left+o.width/2,i=e.getBoundingClientRect(),l=i.left+i.width/2,a=t.scrollLeft+(l-n);t.scrollTo({left:a,behavior:"smooth"})}},150))});let w=1,$=1,E=4,L=!1,_=0,S=0,k=0,B=0;function G(){if(1===w&&0===k&&0===B)u.mainPhoto.style.transform="",u.mainPhoto.classList.remove("zoomable");else{const e=`translate(${k}px, ${B}px) scale(${w})`;u.mainPhoto.style.transform=e,w>1?u.mainPhoto.classList.add("zoomable"):u.mainPhoto.classList.remove("zoomable")}u.zoomLevel&&(u.zoomLevel.textContent=`${Math.round(100*w)}%`),u.zoomIn&&u.zoomOut&&u.zoomReset&&(w>=E?u.zoomIn.classList.add("disabled"):u.zoomIn.classList.remove("disabled"),w<=$?u.zoomOut.classList.add("disabled"):u.zoomOut.classList.remove("disabled"),1===w?u.zoomReset.classList.add("disabled"):u.zoomReset.classList.remove("disabled"))}function C(){w=1,k=0,B=0,G()}u.mainPhoto.addEventListener("wheel",e=>{if(e.ctrlKey||0!==e.deltaY){e.preventDefault();const t=w,o=Math.abs(e.deltaY)>50?.1:.05;w=e.deltaY<0?Math.min(w+o,E):Math.max(w-o,$),w!==t&&G()}},{passive:!1}),u.mainPhoto.addEventListener("mousedown",e=>{w>1&&(e.preventDefault(),L=!0,_=e.clientX-k,S=e.clientY-B)}),document.addEventListener("mousemove",e=>{if(L&&w>1){e.preventDefault();const t=e.clientX-_,o=e.clientY-S,n=u.mainPhoto.getBoundingClientRect(),i=u.mainPhoto.parentElement.getBoundingClientRect(),l=n.width*w,a=n.height*w,s=Math.max(0,(l-i.width)/2),r=Math.max(0,(a-i.height)/2);k=Math.max(-s,Math.min(s,t)),B=Math.max(-r,Math.min(r,o)),G()}}),document.addEventListener("mouseup",()=>{L=!1});let T=0,j=1,D=0,F=0,P=0,Y=0,z=0,R=0,q=0,N=0,A=0,O=0,X=!1,H=0;function J(e){return{x:(e[0].clientX+e[1].clientX)/2,y:(e[0].clientY+e[1].clientY)/2}}function V(e){return Math.hypot(e[1].clientX-e[0].clientX,e[1].clientY-e[0].clientY)}function K(){const e=u.mainPhoto.parentElement.getBoundingClientRect();return{x:e.left+e.width/2,y:e.top+e.height/2}}function U(e,t,o){const n=u.mainPhoto.parentElement.getBoundingClientRect(),i=u.mainPhoto;if(!i.naturalWidth||!i.naturalHeight)return{x:e,y:t};const l=i.naturalWidth/i.naturalHeight;let a,s;l>n.width/n.height?(a=n.width,s=n.width/l):(s=n.height,a=n.height*l);const r=a*o,c=s*o,d=Math.max(0,(r-n.width)/2),m=Math.max(0,(c-n.height)/2);return{x:Math.max(-d,Math.min(d,e)),y:Math.max(-m,Math.min(m,t))}}function W(e,t,o,n=200){u.mainPhoto.style.transition=`transform ${n}ms ease-out`,w=e,k=t,B=o,G(),setTimeout(()=>{u.mainPhoto.style.transition=""},n)}u.mainPhoto.addEventListener("touchstart",e=>{if(2===e.touches.length){e.preventDefault(),X=!1,T=V(e.touches),j=w,D=k,F=B;const t=J(e.touches);P=t.x,Y=t.y,z=t.x,R=t.y}else 1===e.touches.length&&w>1&&(e.preventDefault(),X=!0,q=e.touches[0].clientX,N=e.touches[0].clientY,A=k,O=B)},{passive:!1}),u.mainPhoto.addEventListener("touchmove",e=>{if(2===e.touches.length){e.preventDefault(),X=!1;const t=V(e.touches),o=J(e.touches);if(T>0){const e=t/T,n=Math.min(Math.max(j*e,$),E),i=K(),l=P-i.x,a=Y-i.y,s=n/j;let r=D+l*(1-s),c=F+a*(1-s);r+=o.x-P,c+=o.y-Y,w=n,k=r,B=c,z=o.x,R=o.y,G()}}else if(1===e.touches.length&&X&&w>1){e.preventDefault();const t=e.touches[0].clientX-q,o=e.touches[0].clientY-N;k=A+t,B=O+o,G()}},{passive:!1}),u.mainPhoto.addEventListener("touchend",e=>{if(e.touches.length<2&&(T=0),0===e.touches.length){if(X=!1,w<$)return void W($,0,0);if(w<=1)W(1,0,0);else{const e=U(k,B,w);e.x===k&&e.y===B||function(e,t,o=200){u.mainPhoto.style.transition=`transform ${o}ms ease-out`,k=e,B=t,G(),setTimeout(()=>{u.mainPhoto.style.transition=""},o)}(e.x,e.y)}const t=Date.now();if(t-H<300){if(w>1)W(1,0,0);else{const t=e.changedTouches[0],o=K(),n=U(-(t.clientX-o.x),-(t.clientY-o.y),2);W(2,n.x,n.y)}H=0}else H=t}});let Z=0,Q=0,ee=0;function te(){u.loading.style.display="none",u.noPhotos.style.display="block"}document.querySelector(".photo-viewer").addEventListener("touchstart",e=>{1===e.touches.length&&1===w&&(Z=e.touches[0].clientX,Q=e.touches[0].clientY,ee=Date.now())},{passive:!0}),document.querySelector(".photo-viewer").addEventListener("touchend",e=>{if(1!==w)return;if(0===Z)return;const t=e.changedTouches[0].clientX,o=e.changedTouches[0].clientY,n=Date.now()-ee,i=t-Z,l=o-Q;Math.abs(i)>Math.abs(l)&&Math.abs(i)>50&&n<300&&I(i>0?"prev":"next"),Z=0,Q=0},{passive:!0}),u.zoomIn&&u.zoomIn.addEventListener("click",()=>{w<E&&(w=Math.min(w+.25,E),G())}),u.zoomOut&&u.zoomOut.addEventListener("click",()=>{w>$&&(w=Math.max(w-.25,$),1===w&&(k=0,B=0),G())}),u.zoomReset&&u.zoomReset.addEventListener("click",()=>{C()}),u.mainPhoto.addEventListener("dblclick",e=>{e.preventDefault(),w>1?C():(w=2,k=0,B=0,G())}),window.addEventListener("popstate",e=>{e.state&&void 0!==e.state.photoIndex&&(clearTimeout(l),clearTimeout(r),s=!0,d=Date.now(),b(e.state.photoIndex,!1,!1),r=setTimeout(()=>{s=!1},300))}),document.addEventListener("keydown",e=>{if("Escape"===e.key){const e=document.querySelector(".photo-metadata");if(e&&e.classList.contains("mobile-visible"))return void v();if(w>1)return void C();if(i&&"photo"===a)return void y()}if("r"===e.key||"R"===e.key)return console.log("Reloading gallery..."),void location.reload();0!==n.length&&("ArrowLeft"===e.key?I("prev"):"ArrowRight"===e.key&&I("next"))}),window.photographyGallery={getOldestPhotoInfo:function(){if(0===n.length)return null;const e=n[0],o=new Date(e.date);return{month:o.toLocaleDateString("en-US",{month:"long"}),year:o.getFullYear(),image:e.src||t+e.file}},photoCount:e.length};let oe=(new Date).getMonth();setInterval(()=>{const e=(new Date).getMonth();e!==oe&&(console.log("New month detected, rebuilding timeline..."),oe=e,n.length>0&&h())},6e4),async function(){0!==e.length?async function(){const l=e.length,a=[];u.loading.textContent=`Loading photos (0/${l})...`;for(let o=0;o<e.length;o++){const n=e[o],i=(async()=>{try{const e=Date.now(),i=`${t}${n.file}?v=${e}`;return new Promise(async(e,t)=>{const l=new Image;l.onload=async function(){console.log(`✓ Loaded: ${n.file} (${l.naturalWidth}x${l.naturalHeight})`);let t=null,a=n.date;try{"undefined"==typeof exifr?console.warn("  exifr library not loaded"):(t=await exifr.parse(i,{tiff:!0,exif:!0,gps:!0,interop:!1}),t?.DateTimeOriginal&&!n.date&&(a=t.DateTimeOriginal.toISOString().split("T")[0]),t?(console.log(`  EXIF: ${t?.Make||"N/A"} ${t?.Model||""} | GPS: ${t?.latitude?"Yes":"No"}`),console.log(`  GPS Debug - lat: ${t?.latitude}, lng: ${t?.longitude}, GPSLatitude: ${t?.GPSLatitude}`)):console.warn(`  No EXIF data found in ${n.file}`))}catch(e){console.warn(`  EXIF parse error for ${n.file}:`,e.message)}e({...n,index:o,img:l,src:i,width:l.naturalWidth,height:l.naturalHeight,date:a,exif:t})},l.onerror=function(){console.error(`✗ Failed to load: ${n.file}`),t(new Error(`Failed to load: ${n.file}`))},l.src=i})}catch(e){return console.error(`✗ Error processing ${n.file}:`,e),null}})();a.push(i)}(await Promise.allSettled(a)).forEach(e=>{"fulfilled"===e.status&&null!==e.value&&n.push(e.value)}),console.log(`Loaded ${n.length} of ${l} photos`),n.length>0?function(){u.loading.style.display="none",h();const e=new URLSearchParams(window.location.search).get("photo");let l=n.length-1;if(e){const t=parseInt(e,10)-1;t>=0&&t<n.length&&(l=t)}i?(function(){if(!u.mobileGrid)return;u.mobileGrid.innerHTML="";const e=[...n].reverse(),o=new Map;e.forEach((e,t)=>{const i=m(e.date).getFullYear();o.has(i)||o.set(i,[]);const l=n.length-1-t;o.get(i).push({photo:e,originalIndex:l})}),o.forEach((e,o)=>{const n=document.createElement("div");n.className="mobile-grid-year-wrapper";const i=document.createElement("div");i.className="mobile-grid-year",i.textContent=o,n.appendChild(i),u.mobileGrid.appendChild(n);const l=document.createElement("div");l.className="mobile-grid-section";for(let o=0;o<e.length;o+=2){const{photo:n,originalIndex:i}=e[o],a=e[o+1],s=a?a.photo:null,r=a?a.originalIndex:null,c=n.width/n.height,d=s?s.width/s.height:c,m=c+d,u=s?c/m*100:100,h=s?d/m*100:0,g=document.createElement("div");g.className="mobile-grid-item",g.dataset.photoIndex=i,g.style.width=`calc(${u}% - 1px)`;const y=document.createElement("img");if(y.src=n.src||t+n.file,y.alt=n.file,y.loading="lazy",g.appendChild(y),g.addEventListener("click",()=>{p(i)}),l.appendChild(g),s){const e=document.createElement("div");e.className="mobile-grid-item",e.dataset.photoIndex=r,e.style.width=`calc(${h}% - 1px)`;const o=document.createElement("img");o.src=s.src||t+s.file,o.alt=s.file,o.loading="lazy",e.appendChild(o),e.addEventListener("click",()=>{p(r)}),l.appendChild(e)}}u.mobileGrid.appendChild(l)}),console.log(`Built mobile grid with ${n.length} photos across ${o.size} years`)}(),function(){const e=document.querySelector(".mobile-timeline");if(!e)return;const t=new Map;n.forEach((e,o)=>{const n=m(e.date),i=`${n.getFullYear()}-${String(n.getMonth()+1).padStart(2,"0")}`;t.has(i)||t.set(i,[]),t.get(i).push({...e,globalIndex:o})});const o=m(n[0].date),i=m(n[n.length-1].date),l=[];let a=new Date(o.getFullYear(),o.getMonth(),1);const s=new Date(i.getFullYear(),i.getMonth(),1);for(;a<=s;){const e=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}`;l.push({key:e,year:a.getFullYear(),month:a.getMonth(),photos:t.get(e)||[]}),a.setMonth(a.getMonth()+1)}g={allMonths:l,firstDate:o,lastDate:i};const r=Math.max(...l.map(e=>e.photos.length),1),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=l.map((e,t)=>({x:t/(l.length-1||1)*100,y:22-e.photos.length/r*18,month:e}));const u=function(e){if(e.length<2)return"";let t=`M ${e[0].x} ${e[0].y}`;for(let o=0;o<e.length-1;o++){const n=e[0===o?o:o-1],i=e[o],l=e[o+1],a=e[o+2<e.length?o+2:o+1],s=.5;t+=` C ${i.x+(l.x-n.x)*s} ${i.y+(l.y-n.y)*s}, ${l.x-(a.x-i.x)*s} ${l.y-(a.y-i.y)*s}, ${l.x} ${l.y}`}return t}(d),h=`${u} L ${d[d.length-1].x} 30 L ${d[0].x} 30 Z`,p=`${c[o.getMonth()]} ${o.getFullYear()}`,y=`${c[i.getMonth()]} ${i.getFullYear()}`;e.innerHTML=`\n            <div class="mobile-timeline-track">\n                <div class="mobile-timeline-graph">\n                    <svg viewBox="0 0 100 30" preserveAspectRatio="none">\n                        <defs>\n                            <linearGradient id="timeline-gradient" x1="0%" y1="0%" x2="0%" y2="100%">\n                                <stop offset="0%" stop-color="rgba(255, 255, 255, 0.3)" />\n                                <stop offset="100%" stop-color="rgba(255, 255, 255, 0)" />\n                            </linearGradient>\n                        </defs>\n                        <path class="mobile-timeline-area" d="${h}" />\n                        <path class="mobile-timeline-line" d="${u}" />\n                    </svg>\n                    <div class="mobile-timeline-indicator" id="mobile-timeline-indicator"></div>\n                </div>\n            </div>\n            <div class="mobile-timeline-labels">\n                <span class="mobile-timeline-label-item">${p}</span>\n                <span class="mobile-timeline-label-item">${y}</span>\n            </div>\n            <div class="mobile-timeline-current" id="mobile-timeline-current"></div>\n        `}(),function(){u.mobileCloseBtn&&u.mobileCloseBtn.addEventListener("click",e=>{e.preventDefault(),y()}),u.mobileInfoBtn&&u.mobileInfoBtn.addEventListener("click",e=>{e.preventDefault(),f()});const e=document.querySelector(".photo-metadata");e&&e.addEventListener("click",t=>{t.target===e&&v()});const t=document.getElementById("info-close-btn");t&&t.addEventListener("click",e=>{e.preventDefault(),v()}),function(){const e=document.querySelector(".photo-viewer"),t=document.getElementById("main-photo"),n=document.getElementById("gallery-layout"),i=document.getElementById("mobile-grid-view");if(!e||!t)return;let l=0,a=0,s=0,r=!1,c=!1,d=null,m=!1;let u=0,h=0,g=0;function p(){d=null,r=!1,c=!1,t.style.opacity="",t.style.borderRadius="",t.style.transition="",n&&(n.style.background="",n.style.transition=""),i&&(i.classList.remove("active"),i.style.opacity="",i.style.transition="")}e.addEventListener("touchstart",e=>{if(!(document.querySelector(".photo-metadata.mobile-visible")||w>1)){if(e.touches.length>1)return m=!0,void p();m=!1,l=e.changedTouches[0].clientX,a=e.changedTouches[0].clientY,s=a,u=a,h=Date.now(),g=0,r=!1,c=!1,d=null,t.style.transition="none",n&&(n.style.transition="none"),i&&(i.classList.add("active"),i.style.opacity="0",i.style.transition="none")}},{passive:!0}),e.addEventListener("touchmove",e=>{if(document.querySelector(".photo-metadata.mobile-visible"))return;if(w>1)return;if(e.touches.length>1)return void(m||(m=!0,p()));if(m)return;const o=e.changedTouches[0].clientX,y=e.changedTouches[0].clientY,f=o-l,v=y-a;if(!d&&(Math.abs(f)>10||Math.abs(v)>10)&&(Math.abs(v)>Math.abs(f)?(d="vertical",r=!0):(d="horizontal",c=!0)),"vertical"===d&&v>0){s=y;const e=Date.now(),o=e-h;o>0&&(g=(y-u)/o),u=y,h=e;const l=Math.min(v/120,1),a=1-.4*l,r=16*l;t.style.transform=`translateY(${v}px) scale(${a})`,t.style.borderRadius=`${r}px`,n&&(n.style.background=`rgba(0, 0, 0, ${1-.8*l})`),i&&(i.style.opacity=String(.8*l))}},{passive:!0}),e.addEventListener("touchend",e=>{if(document.querySelector(".photo-metadata.mobile-visible"))return;if(w>1)return;if(m)return void(m=!1);if(!d)return;const s=e.changedTouches[0].clientX,r=e.changedTouches[0].clientY,c=s-l,u=r-a;if(!("vertical"===d&&u>0))return"horizontal"===d&&Math.abs(c)>50?(t.style.transform="",t.style.opacity="",t.style.borderRadius="",t.style.transition="",n&&(n.style.background="",n.style.transition=""),i&&(i.classList.remove("active"),i.style.opacity="",i.style.transition=""),void I(c<0?"next":"prev")):"vertical"===d&&u<-50?(t.style.transform="",t.style.opacity="",t.style.borderRadius="",t.style.transition="",n&&(n.style.background="",n.style.transition=""),i&&(i.classList.remove("active"),i.style.opacity="",i.style.transition=""),void f()):(t.style.transition="transform 0.3s ease, opacity 0.3s ease, border-radius 0.3s ease",t.style.transform="",t.style.opacity="",t.style.borderRadius="",i&&(i.style.transition="opacity 0.3s ease",i.style.opacity="0"),void setTimeout(()=>{t.style.transition="",n&&(n.style.background="",n.style.transition=""),i&&(i.classList.remove("active"),i.style.opacity="",i.style.transition="")},300));if(u>120||g>.4){const e=function(){const e=document.querySelector(`.mobile-grid-item[data-photo-index="${o}"]`);return e?e.getBoundingClientRect():null}(),l=t.getBoundingClientRect();let a=0,s=window.innerHeight,r=.3;if(e){const t=l.left+l.width/2,o=l.top+l.height/2;a=e.left+e.width/2-t,s=e.top+e.height/2-o,r=e.width/l.width}t.style.transition="transform 0.25s ease-out, opacity 0.25s ease-out, border-radius 0.25s ease-out",n&&(n.style.transition="background 0.25s ease-out"),i&&(i.style.transition="opacity 0.25s ease-out"),t.style.transform=`translate(${a}px, ${s}px) scale(${r})`,t.style.opacity="0",t.style.borderRadius="8px",n&&(n.style.background="transparent"),i&&(i.style.opacity="1"),setTimeout(()=>{t.style.transition="",t.style.transform="",t.style.opacity="",t.style.borderRadius="",n&&(n.style.transition="",n.style.background=""),i&&(i.style.transition=""),y()},250)}else t.style.transition="transform 0.3s cubic-bezier(0.2, 0.9, 0.3, 1), opacity 0.3s ease, border-radius 0.3s ease",n&&(n.style.transition="background 0.3s ease"),i&&(i.style.transition="opacity 0.3s ease"),t.style.transform="",t.style.opacity="",t.style.borderRadius="",n&&(n.style.background=""),i&&(i.style.opacity="0"),setTimeout(()=>{t.style.transition="",n&&(n.style.transition=""),i&&(i.classList.remove("active"),i.style.transition="",i.style.opacity="")},300)},{passive:!0});const b=document.querySelector(".photo-metadata");if(b){let e=0;b.addEventListener("touchstart",t=>{e=t.changedTouches[0].screenY},{passive:!0}),b.addEventListener("touchend",t=>{t.changedTouches[0].screenY-e>50&&v()},{passive:!0})}}()}(),e?p(l):u.mobileGridView&&u.mobileGridView.classList.add("active")):(u.galleryLayout.style.display="flex",setTimeout(()=>{s=!0,d=Date.now(),b(l),setTimeout(()=>{s=!1},1e3)},100)),function(){const e=document.getElementById("nav-prev"),t=document.getElementById("nav-next");e&&e.addEventListener("click",()=>I("prev")),t&&t.addEventListener("click",()=>I("next")),M()}()}():te()}():te()}()}();