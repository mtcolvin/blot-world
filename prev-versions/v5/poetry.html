<!DOCTYPE html>
<html lang="en">
<head>
	<link rel="stylesheet" href="../../css/minimal-nav.css">
	
	<!-- Google Fonts Roboto Flex -->
	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,slnt,wdth,wght,GRAD,XOPQ,XTRA,YOPQ,YTAS,YTDE,YTFI,YTLC,YTUC@8..144,-10..0,25..151,100..1000,-200..150,27..175,323..603,25..135,649..854,-305..-98,560..788,416..570,528..760&display=swap" rel="stylesheet">
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Poetry Collection</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            max-height: 100vh;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Georgia', serif;
            padding: 60px;
            overflow-x: hidden;
        }

        .book-container {
            perspective: 2000px;
            max-width: 1200px;
            width: 100%;
        }

        .book {
            display: flex;
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            transform-style: preserve-3d;
            animation: floatBook 6s ease-in-out infinite;
        }

        @keyframes floatBook {
            0%, 100% { transform: translateY(0) rotateY(-2deg); }
            50% { transform: translateY(-10px) rotateY(2deg); }
        }

        .page {
            flex: 1;
            padding: 50px 40px;
            background: #fef9f3;
            position: relative;
            height: 550px;
            display: flex;
            flex-direction: column;
        }

        .page-left {
            background: linear-gradient(90deg, #f5f0e8 0%, #fef9f3 10%);
            border-right: 1px solid #d4c5b9;
            box-shadow: inset -10px 0 30px rgba(0, 0, 0, 0.05);
        }

        .page-right {
            background: linear-gradient(270deg, #f5f0e8 0%, #fef9f3 10%);
            box-shadow: inset 10px 0 30px rgba(0, 0, 0, 0.05);
        }

        .page::before {
            content: '';
            position: absolute;
            top: 0;
            bottom: 0;
            width: 30px;
            background: linear-gradient(90deg, transparent, rgba(0, 0, 0, 0.02));
        }

        .page-left::before {
            right: 0;
        }

        .page-right::before {
            left: 0;
            transform: scaleX(-1);
        }

        .poem-title {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 10px;
            text-align: center;
            font-weight: normal;
            letter-spacing: 2px;
            opacity: 0;
            animation: fadeInUp 0.8s ease forwards;
        }

        .poem-date {
            font-size: 14px;
            color: #7f8c8d;
            text-align: center;
            margin-bottom: 30px;
            font-style: italic;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.2s forwards;
        }

        .poem-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            line-height: 0.5;
            color: #34495e;
            font-size: 12px;
            opacity: 0;
            animation: fadeInUp 0.8s ease 0.4s forwards;
        }

        .poem-content p {
            margin-bottom: 1em;
            text-align: center;
        }

        @keyframes fadeInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
            from {
                opacity: 0;
                transform: translateY(20px);
            }
        }

        .page-number {
            position: absolute;
            bottom: 30px;
            font-size: 14px;
            color: #95a5a6;
            font-style: italic;
        }

        .page-left .page-number {
            left: 40px;
        }

        .page-right .page-number {
            right: 40px;
        }

        .navigation {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 20px;
            z-index: 100;
        }

        .nav-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: #2c3e50;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .nav-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            background: white;
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn:active:not(:disabled) {
            transform: translateY(-1px);
        }

        .toc {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 100;
        }

        .toc-btn {
            background: rgba(255, 255, 255, 0.9);
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 14px;
            color: #2c3e50;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        }

        .toc-btn:hover {
            background: white;
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
        }

        .toc-menu {
            position: absolute;
            top: 60px;
            right: 0;
            background: white;
            border-radius: 10px;
            box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
            padding: 20px;
            min-width: 250px;
            max-height: 400px;
            overflow-y: auto;
            display: none;
            animation: slideDown 0.3s ease;
        }

        .toc-menu.show {
            display: block;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .toc-item {
            padding: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: all 0.2s ease;
            color: #34495e;
        }

        .toc-item:hover {
            background: #f0f0f0;
            padding-left: 15px;
        }

        .toc-item.active {
            background: #667eea;
            color: white;
        }

        @media (max-width: 768px) {
            .book {
                flex-direction: column;
                animation: none;
            }
            
            .page {
                padding: 30px 20px;
                min-height: 400px;
            }
            
            .page-left {
                border-right: none;
                border-bottom: 1px solid #d4c5b9;
            }
            
            .poem-title {
                font-size: 24px;
            }
            
            .poem-content {
                font-size: 16px;
            }
        }
    </style>
</head>
<body>
	<!-- Loader -->
    <div class="loader" id="loader">
        <div class="loader-spinner"></div>
    </div>

    <!-- Minimal Navigation -->
	<nav class="minimal-nav" onclick="window.location.href='../../index.html'">
		<div class="minimal-nav-container">
			<button class="back-btn-minimal">
				<svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
					<path d="M20 11H7.414l4.293-4.293c.39-.39.39-1.024 0-1.414s-1.024-.39-1.414 0l-6 6c-.39.39-.39 1.024 0 1.414l6 6c.195.195.451.293.707.293s.512-.098.707-.293c.39-.39.39-1.024 0-1.414L7.414 13H20c.553 0 1 .447 1 1s-.447 1-1 1z"/>
				</svg>
			</button>
			
			<div class="logo-minimal">
				<div class="logo-icon">
					<img src="../../images/blot-iconmark-black-bkgnd.png" alt="BLOT Logo">
				</div>
				<div class="logo-title">
					<span>B</span><span>L</span><span>O</span><span>T</span><span>.</span><span>W</span><span>O</span><span>R</span><span>L</span><span>D</span>
				</div>
			</div>
		</div>
	</nav>

    <div class="book-container">
        <div class="book">
            <div class="page page-left">
                <h1 class="poem-title" id="left-title"></h1>
                <p class="poem-date" id="left-date"></p>
                <div class="poem-content" id="left-content"></div>
                <span class="page-number" id="left-page"></span>
            </div>
            <div class="page page-right">
                <h1 class="poem-title" id="right-title"></h1>
                <p class="poem-date" id="right-date"></p>
                <div class="poem-content" id="right-content"></div>
                <span class="page-number" id="right-page"></span>
            </div>
        </div>
    </div>

    <div class="navigation">
        <button class="nav-btn" id="prev-btn" onclick="navigate(-2)">‚Üê</button>
        <button class="nav-btn" id="next-btn" onclick="navigate(2)">‚Üí</button>
    </div>

    <div class="toc">
        <button class="toc-btn" onclick="toggleTOC()">üìö Table of Contents</button>
        <div class="toc-menu" id="toc-menu"></div>
    </div>

    <script>
        const poems = [
            {
                title: "",
                date: "",
                content: `<div style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                         <h2 style="font-size: 32px; color: #2c3e50; font-weight: normal; letter-spacing: 3px; margin-bottom: 20px;">Welcome</h2>
                         </div>`
            },
            {
                title: "Upon a Dove on the Railroad Track",
                date: "October 2015",
                content: `<p>A pure, gray dove o'th morning dew,</p>
                         <p>through morning air with grace it flew,</p>
                         <p>did swoop right down to nature's pew,</p>
                         <p>a noble action didst Satan rue.</p>
                         <p></p>
                         <p>Spitter clack smack on the railroad track,</p>
                         <p>a nation's toil and lack of sack</p>
                         <p>did build a monument so grand</p>
						 <p>in the pure and golden sand</p>
						 <p></p>
						 <p>Upon this track, a dove did lie,</p>
						 <p>oblivious to lies foretold.</p>
						 <p>Mephistopheles did fie,</p>
						 <p>and God did mark with purest gold.</p>
						 <p></p>
						 <p>The angels beg and plead and shout and pray,</p>
						 <p>"Evermore, evermore, evermore."`
            },
			{
                title: "A Story Fleeting",
                date: "March 2023",
                content: `<p>Kissed a time, a place, a when;</p>
                         <p>only brothers can amend.</p>
                         <p></p>
                         <p>Under Thou shall stories told</p>
                         <p>rest forever, thought, untold.</p>
                         <p></p>
                         <p>Thou, shalt know;</p>
                         <p>thou shalt seek:</p>
						 <p>Nothing is,</p>
						 <p>truly weak.</p>
						 <p></p>
						 <p>Eternality,</p>
						 <p>itself does die.</p>
						 <p>Years, it's felt;</p>
						 <p>have gone by.</p>
						 <p></p>
						 <p>I love you dearly,</p>
						 <p>may we meet</p>
						 <p>when times are better,</p>
						 <p>bittersweet.</p>`
            }
        ];

        let currentPage = 0;

        function displayPoems(pageNum) {
            const leftIndex = pageNum - 1;
            const rightIndex = pageNum;
            
            // Reset animations
            document.querySelectorAll('.poem-title, .poem-date, .poem-content').forEach(el => {
                el.style.animation = 'none';
                el.offsetHeight; // Trigger reflow
                el.style.animation = null;
            });
            
            if (leftIndex >= 0 && leftIndex < poems.length) {
                document.getElementById('left-title').textContent = poems[leftIndex].title;
                document.getElementById('left-date').textContent = poems[leftIndex].date;
                document.getElementById('left-content').innerHTML = poems[leftIndex].content;
                document.getElementById('left-page').textContent = leftIndex > 0 ? leftIndex : '';
            } else {
                document.getElementById('left-title').textContent = '';
                document.getElementById('left-date').textContent = '';
                document.getElementById('left-content').innerHTML = '';
                document.getElementById('left-page').textContent = '';
            }
            
            if (rightIndex >= 0 && rightIndex < poems.length) {
                document.getElementById('right-title').textContent = poems[rightIndex].title;
                document.getElementById('right-date').textContent = poems[rightIndex].date;
                document.getElementById('right-content').innerHTML = poems[rightIndex].content;
                document.getElementById('right-page').textContent = rightIndex;
            } else {
                document.getElementById('right-title').textContent = '';
                document.getElementById('right-date').textContent = '';
                document.getElementById('right-content').innerHTML = '';
                document.getElementById('right-page').textContent = '';
            }
            
            // Update navigation buttons
            document.getElementById('prev-btn').disabled = pageNum <= 0;
            document.getElementById('next-btn').disabled = pageNum >= poems.length - 1;
            
            // Update URL
            window.location.hash = pageNum > 0 ? `page-${pageNum}` : '';
            
            // Update TOC active state
            updateTOCActive();
        }

        function navigate(direction) {
            const newPage = currentPage + direction;
            if (newPage >= 0 && newPage < poems.length) {
                currentPage = newPage;
                displayPoems(currentPage);
            }
        }

        function goToPoem(index) {
            currentPage = index;
            displayPoems(currentPage);
            toggleTOC();
        }

        function toggleTOC() {
            const menu = document.getElementById('toc-menu');
            menu.classList.toggle('show');
        }

        function updateTOCActive() {
            document.querySelectorAll('.toc-item').forEach((item, index) => {
                item.classList.toggle('active', index === currentPage);
            });
        }

        function initializeTOC() {
            const tocMenu = document.getElementById('toc-menu');
            poems.forEach((poem, index) => {
                if (index === 0) return; // Skip the welcome page in TOC
                const item = document.createElement('div');
                item.className = 'toc-item';
                item.textContent = `${index}. ${poem.title}`;
                item.onclick = () => goToPoem(index);
                tocMenu.appendChild(item);
            });
        }

        // Handle URL hash changes
        function handleHashChange() {
            const hash = window.location.hash;
            if (hash) {
                const match = hash.match(/page-(\d+)/);
                if (match) {
                    const pageNum = parseInt(match[1]);
                    if (pageNum >= 0 && pageNum < poems.length) {
                        currentPage = pageNum;
                        displayPoems(currentPage);
                    }
                }
            } else {
                currentPage = 0;
                displayPoems(0);
            }
        }

        // Initialize
        window.addEventListener('hashchange', handleHashChange);
        window.addEventListener('load', () => {
            initializeTOC();
            handleHashChange();
            if (!window.location.hash) {
                displayPoems(0);
            }
        });

        // Keyboard navigation
        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowLeft') navigate(-2);
            if (e.key === 'ArrowRight') navigate(2);
        });

        // Close TOC when clicking outside
        document.addEventListener('click', (e) => {
            const toc = document.querySelector('.toc');
            const tocMenu = document.getElementById('toc-menu');
            if (!toc.contains(e.target) && tocMenu.classList.contains('show')) {
                tocMenu.classList.remove('show');
            }
        });
    </script>
</body>
</html>