function generateDynamicFilters(){const e=document.querySelectorAll("#projects-grid .project-card-link .project-card"),t=new Map,a=new Map,c={completed:0,"in-progress":0,planned:0};let s=e.length;e.forEach(e=>{const s=e.dataset.status;void 0!==c[s]&&c[s]++;const r=e.dataset.area;r&&a.set(r,(a.get(r)||0)+1);const l=e.dataset.tech;l&&l.split(",").map(e=>e.trim()).forEach(e=>{e&&t.set(e,(t.get(e)||0)+1)})}),buildStatusFilters(c,s),buildAreaFilters(a),buildTechFilters(t),attachFilterEventListeners()}function buildStatusFilters(e,t){const a=document.getElementById("status-filter-options");if(!a)return;a.innerHTML="";const c=createFilterOption("status","all","All",t,!0);a.appendChild(c);const s={completed:"Completed","in-progress":"In Progress",planned:"Planned"};Object.entries(e).forEach(([e,t])=>{if(t>0){const c=createFilterOption("status",e,s[e],t,!1);a.appendChild(c)}})}function buildAreaFilters(e){const t=document.getElementById("area-filter-options");t&&(t.innerHTML="",Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0])).forEach(([e,a])=>{const c=createFilterOption("area",e,e,a,!1);t.appendChild(c)}))}function buildTechFilters(e){const t=document.getElementById("tech-filter-options");t&&(t.innerHTML="",Array.from(e.entries()).sort((e,t)=>e[0].localeCompare(t[0])).forEach(([e,a])=>{const c=createFilterOption("tech",e,e,a,!1);t.appendChild(c)}))}function createFilterOption(e,t,a,c,s){const r=document.createElement("div");r.className="filter-option",r.dataset.filter=e,r.dataset.value=t;const l=document.createElement("div");l.className=s?"filter-checkbox checked":"filter-checkbox";const i=document.createElement("span");i.textContent=a;const o=document.createElement("span");return o.className="filter-count",o.textContent=c,r.appendChild(l),r.appendChild(i),r.appendChild(o),r}function attachFilterEventListeners(){document.querySelectorAll(".filter-option").forEach(e=>{e.addEventListener("click",handleFilterClick)})}function regenerateFiltersWithSelections(){const e={status:[...activeFilters.status],tech:[...activeFilters.tech]};generateDynamicFilters(),activeFilters.status=e.status,activeFilters.tech=e.tech,restoreFilterSelections()}function restoreFilterSelections(){document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.remove("checked")}),activeFilters.status.forEach(e=>{const t=document.querySelector(`[data-filter="status"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),activeFilters.area.forEach(e=>{const t=document.querySelector(`[data-filter="area"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),activeFilters.tech.forEach(e=>{const t=document.querySelector(`[data-filter="tech"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")})}let activeFilters={status:["all"],area:[],tech:[],sort:"default"};function handleFilterClick(e){const t=e.currentTarget,a=t.dataset.filter,c=t.dataset.value,s=t.querySelector(".filter-checkbox");"status"===a?(document.querySelectorAll('[data-filter="status"] .filter-checkbox').forEach(e=>{e.classList.remove("checked")}),activeFilters.status=[],s.classList.add("checked"),activeFilters.status=[c]):"area"===a?s.classList.contains("checked")?(s.classList.remove("checked"),activeFilters.area=activeFilters.area.filter(e=>e!==c)):(s.classList.add("checked"),activeFilters.area.push(c)):"tech"===a&&(s.classList.contains("checked")?(s.classList.remove("checked"),activeFilters.tech=activeFilters.tech.filter(e=>e!==c)):(s.classList.add("checked"),activeFilters.tech.push(c))),filterProjects()}function handleSortChange(e){const t=e.value;activeFilters.sort=t,filterProjects()}function clearAllFilters(){document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.remove("checked")});const e=document.querySelector('[data-filter="status"][data-value="all"] .filter-checkbox');e&&e.classList.add("checked"),document.getElementById("sort-select").value="default",activeFilters={status:["all"],area:[],tech:[],sort:"default"},filterProjects()}function applyFiltersFromState(){document.getElementById("sort-select").value=activeFilters.sort,document.querySelectorAll(".filter-checkbox").forEach(e=>{e.classList.remove("checked")}),activeFilters.status.forEach(e=>{const t=document.querySelector(`[data-filter="status"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),activeFilters.area.forEach(e=>{const t=document.querySelector(`[data-filter="area"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),activeFilters.tech.forEach(e=>{const t=document.querySelector(`[data-filter="tech"][data-value="${e}"] .filter-checkbox`);t&&t.classList.add("checked")}),filterProjects()}function serializeFiltersToURL(){const e=new URLSearchParams;return activeFilters.status.length>0&&!activeFilters.status.includes("all")&&e.set("status",activeFilters.status.join(",")),activeFilters.area.length>0&&e.set("area",activeFilters.area.join(",")),activeFilters.tech.length>0&&e.set("tech",activeFilters.tech.join(",")),"default"!==activeFilters.sort&&e.set("sort",activeFilters.sort),e.toString()}function parseFiltersFromURL(){const e=new URLSearchParams(window.location.search),t={status:["all"],area:[],tech:[],sort:"default"};return e.has("status")&&(t.status=e.get("status").split(",")),e.has("area")&&(t.area=e.get("area").split(",")),e.has("tech")&&(t.tech=e.get("tech").split(",")),e.has("sort")&&(t.sort=e.get("sort")),t}